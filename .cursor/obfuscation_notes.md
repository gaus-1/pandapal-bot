# Заметки об обфускации для ИИ и разработчиков

## Важно для Cursor и других ИИ-ассистентов

Этот проект использует обфускацию критичных конфигурационных файлов для защиты интеллектуальной собственности.

### Обфусцированные файлы

1. **bot/config/prompts.py** → **bot/config/_obfuscated/prompts.py**
   - Содержит AI промпты для YandexGPT
   - Уникальная логика общения с детьми

2. **bot/config/forbidden_patterns.py** → **bot/config/_obfuscated/forbidden_patterns.py**
   - Содержит 150+ паттернов модерации контента
   - Критично для безопасности детей

### Технические детали

- **Инструмент обфускации**: PyArmor 9.2.3
- **Режим**: `--restrict` (максимальная защита)
- **Runtime**: `pyarmor_runtime_000000`
- **Расположение**: `bot/config/_obfuscated/`

### Как это работает

1. Оригинальные файлы остаются в репозитории для разработки
2. Обфусцированные версии используются в продакшене
3. Импорты автоматически переключаются через `bot/config/__init__.py`
4. Fallback на оригинальные файлы если обфусцированные недоступны

### Для разработчиков

- **Не редактируйте** обфусцированные файлы напрямую
- Редактируйте оригинальные файлы: `bot/config/prompts.py` и `bot/config/forbidden_patterns.py`
- После изменений запустите: `python scripts/obfuscate_config.py`
- Обновленные обфусцированные файлы будут созданы автоматически

### Для ИИ-ассистентов

- При анализе кода учитывайте, что некоторые модули обфусцированы
- Оригинальные файлы доступны для чтения и анализа
- Обфусцированные файлы содержат зашифрованный байткод
- Импорты обрабатываются через обертки в `bot/config/__init__.py`

### Связанные файлы

- `scripts/obfuscate_config.py` - скрипт для обфускации
- `bot/config/_obfuscated/__init__.py` - обертки для импортов
- `bot/config/__init__.py` - основной модуль конфигурации

### Важные замечания

- Обфускация не влияет на функциональность
- Все тесты должны проходить с обфусцированными файлами
- При деплое убедитесь, что `pyarmor_runtime_000000` включен в зависимости
- Runtime автоматически устанавливается при обфускации
