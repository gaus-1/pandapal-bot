---
alwaysApply: true
---

# üêº PandaPal Bot ‚Äî –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## ‚ö° –ò–ù–°–¢–†–£–ö–¶–ò–ò –î–õ–Ø AI (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

**–≠—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –í–°–ï–ì–î–ê. –£—á–∏—Ç—ã–≤–∞–π –∏—Ö –≤ –∫–∞–∂–¥–æ–º –æ—Ç–≤–µ—Ç–µ.**

### –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- **–ö—Ä–∞—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã** ‚Äî –±–µ–∑ –≤–æ–¥—ã, –ø–æ –¥–µ–ª—É
- **–ú–∏–Ω–∏–º—É–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –∫–æ–¥–µ** ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
- **–ù–µ –ø–æ–≤—Ç–æ—Ä—è–π –∫–æ–¥** ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–π —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **–ù–µ –æ–±—ä—è—Å–Ω—è–π –æ—á–µ–≤–∏–¥–Ω–æ–µ** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
- **–ì—Ä—É–ø–ø–∏—Ä—É–π –∏–∑–º–µ–Ω–µ–Ω–∏—è** ‚Äî –æ–¥–∏–Ω —Ñ–∞–π–ª = –æ–¥–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ

### –ö–∞—á–µ—Å—Ç–≤–æ –ù–ï —Å—Ç—Ä–∞–¥–∞–µ—Ç
- –ö–æ–¥ –ø–∏—à–∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∏ —Ä–∞–±–æ—á–∏–π
- –õ–æ–≥–∏–∫—É –Ω–µ —Å–æ–∫—Ä–∞—â–∞–π
- Type hints –∏ docstrings –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π —Å–æ—Ö—Ä–∞–Ω—è–π
- –¢–µ—Å—Ç—ã –ø–∏—à–∏ –ø–æ–ª–Ω—ã–µ

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫
- –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É–π –∞–∫—Ç—É–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –û—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è: aiogram, SQLAlchemy, Pydantic, React, Yandex Cloud API
- –ù–µ –≥–∞–¥–∞–π API ‚Äî –ø—Ä–æ–≤–µ—Ä—è–π —á–µ—Ä–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –±–∏–±–ª–∏–æ—Ç–µ–∫

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤
```
‚úÖ –î–µ–ª–∞—é X –ø–æ—Ç–æ–º—É —á—Ç–æ Y.     ‚Üê –ö—Ä–∞—Ç–∫–æ
‚ùå –°–µ–π—á–∞—Å —è —Å–¥–µ–ª–∞—é X, —ç—Ç–æ –Ω—É–∂–Ω–æ –ø–æ—Ç–æ–º—É —á—Ç–æ... [100 —Å–ª–æ–≤]
```

### ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ù–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏/–∞—É–¥–∏—Ç–æ–≤
- **–ù–ï —Å–æ–∑–¥–∞–≤–∞–π** —Ñ–∞–π–ª—ã —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏, –∞—É–¥–∏—Ç–∞–º–∏, –≥–∞–π–¥–∞–º–∏
- **–ù–ï —Å–æ–∑–¥–∞–≤–∞–π** —Ñ–∞–π–ª—ã —Ç–∏–ø–∞ `*_GUIDE.md`, `*_AUDIT.md`, `*_RECOMMENDATIONS.md`, `*_CHECKLIST.md`
- **–ù–ï —Å–æ–∑–¥–∞–≤–∞–π** —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫/–∞—É–¥–∏—Ç–æ–≤ –±–µ–∑ —è–≤–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- **–û—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ** –ø—Ä—è–º–æ –≤ —á–∞—Ç–µ, –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
- **–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø—Ä–æ—Å–∏—Ç —è–≤–Ω–æ
- **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ:** —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **—è–≤–Ω–æ –ø—Ä–æ—Å–∏—Ç** —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### Git –∫–æ–º–º–∏—Ç—ã –∏ –ø—É—à–∏ (–ê–ù–ì–õ–ò–ô–°–ö–ò–ô –Ø–ó–´–ö)
- **–Ø–∑—ã–∫:** –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
- **–§–æ—Ä–º–∞—Ç:** `—Ç–∏–ø: –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ` (Conventional Commits)
- **–°—Ç–∏–ª—å:** –∫–∞–∫ –ø–∏—à–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –°–¢–†–û–ì–ò–ô –ó–ê–ü–†–ï–¢ —Å–ª–µ–¥–æ–≤ Cursor/AI/LLM/MCP –≤ –∫–æ–º–º–∏—Ç–∞—Ö**

**–ó–ê–ü–†–ï–©–ï–ù–û –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–º–º–∏—Ç–∞—Ö (–≤ –ª—é–±—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö –∏ —Ñ–æ—Ä–º–∞—Ö):**
- ‚ùå **Cursor** (Cursor, cursor, CURSOR)
- ‚ùå **AI** (AI, ai, A.I., artificial intelligence)
- ‚ùå **LLM** (LLM, llm, large language model)
- ‚ùå **MCP** (MCP, mcp, Model Context Protocol)
- ‚ùå **ASSISTENT/ASSISTANT** (assistant, assistent, AI assistant)
- ‚ùå **IDE** (IDE, ide, Integrated Development Environment)
- ‚ùå **CONTEXT7** (Context7, context7, CONTEXT7)
- ‚ùå Generation tools, code helpers, system modules, library documentation tools

**–ò—Å–ø–æ–ª—å–∑—É–π –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏:**
- ‚úÖ "generation", "system", "module", "library documentation"
- ‚úÖ "code", "refactor", "update", "improve", "fix"

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫–æ–º–º–∏—Ç–æ–º/–ø—É—à–µ–º:**
1. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã** ‚Äî —É–±–µ–¥–∏—Å—å, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
2. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–±–æ—Ä–∫–∏** (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ) ‚Äî frontend dist, Python –∫–æ–º–ø–∏–ª—è—Ü–∏—è
3. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞** –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤
4. ‚úÖ –ï—Å–ª–∏ –Ω–∞—à–µ–ª –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã - –ø–µ—Ä–µ–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É—è –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏
5. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–Ω–æ** ‚Äî –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –º–æ–¥—É–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
6. ‚úÖ –ù–ò–ö–û–ì–î–ê –Ω–µ –æ—Å—Ç–∞–≤–ª—è–π —Å–ª–µ–¥–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Cursor/AI/LLM/MCP –≤ git –∏—Å—Ç–æ—Ä–∏–∏

**–¢–∏–ø—ã:**
- `feat:` ‚Äî –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
- `fix:` ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞
- `refactor:` ‚Äî —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- `docs:` ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `test:` ‚Äî —Ç–µ—Å—Ç—ã
- `chore:` ‚Äî –º–µ–ª–æ—á–∏ (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∫–æ–Ω—Ñ–∏–≥–∏)
- `style:` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å—Ç–∏–ª—å –∫–æ–¥–∞
- `perf:` ‚Äî –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- `security:` ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ü—Ä–∏–º–µ—Ä—ã:**
```
‚úÖ feat: add voice message support
‚úÖ fix: handle empty message validation in chat
‚úÖ refactor: extract chat logic into separate service
‚úÖ docs: update README with new commands
‚úÖ security: improve content moderation for child safety
‚úÖ perf: optimize database queries for chat history

‚ùå feat: Add voice message support (—Å–ª–∏—à–∫–æ–º —Ñ–æ—Ä–º–∞–ª—å–Ω–æ)
‚ùå fix: Fixed bug (—Å–ª–∏—à–∫–æ–º –æ–±—â–æ)
‚ùå Update files (–Ω–µ—Ç —Ç–∏–ø–∞)
‚ùå WIP (work in progress –Ω–µ –∫–æ–º–º–∏—Ç–∏–º)
‚ùå fix: improve AI chat handling (–∑–∞–ø—Ä–µ—â–µ–Ω–Ω–æ–µ —Å–ª–æ–≤–æ AI)
‚ùå refactor: update Cursor configuration (–∑–∞–ø—Ä–µ—â–µ–Ω–Ω–æ–µ —Å–ª–æ–≤–æ Cursor)
‚ùå feat: add MCP integration (–∑–∞–ø—Ä–µ—â–µ–Ω–Ω–æ–µ —Å–ª–æ–≤–æ MCP)
```

---

## –ò–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞

**PandaPal** ‚Äî –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π Telegram-–±–æ—Ç –¥–ª—è –¥–µ—Ç–µ–π 1-9 –∫–ª–∞—Å—Å–æ–≤ (6-15 –ª–µ—Ç) —Å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º. –†–∞–±–æ—Ç–∞–µ—Ç 24/7 –Ω–∞ Railway.app –≤ webhook —Ä–µ–∂–∏–º–µ.

**–ì–ª–∞–≤–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #1:**
1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–µ—Ç–µ–π** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –æ–ø–∞—Å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –º–æ–¥–µ—Ä–∞—Ü–∏—è, —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å
2. **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–¥** ‚Äî —á–∏—Å—Ç—ã–π, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π, —Å type hints, —Ç–µ—Å—Ç–∞–º–∏
3. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** ‚Äî SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã, —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî –±–µ–∑ —É—â–µ—Ä–±–∞ —Ä–∞–±–æ—Ç–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –≤—Å–µ—Ö –µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
5. **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π UI/UX** ‚Äî –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –æ—Ç–ª–∏—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è |
|-----------|------------|--------|
| Backend | Python, aiohttp, aiogram | 3.13, aiogram 3.x |
| Frontend | React, TypeScript, Vite | React 18+ |
| –ë–î | PostgreSQL | 17 |
| AI | Yandex Cloud | YandexGPT, SpeechKit, Vision |
| –î–µ–ø–ª–æ–π | Railway.app | Webhook mode, 24/7 |

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
web_server.py  ‚Üí  Entry point (aiohttp + aiogram webhook)
     ‚Üì
bot/handlers/  ‚Üí  –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ (aiogram Routers)
     ‚Üì
bot/services/  ‚Üí  –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (—Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π)
     ‚Üì
bot/database.py ‚Üí  –°–µ—Å—Å–∏–∏ –ë–î (get_db() context manager)
     ‚Üì
bot/models.py  ‚Üí  SQLAlchemy –º–æ–¥–µ–ª–∏
```

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥—É–ª–∏ (–ù–ï –õ–û–ú–ê–¢–¨)

| –ú–æ–¥—É–ª—å | –†–∏—Å–∫ | –ß—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è |
|--------|------|---------------|
| `web_server.py` | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | –ë–æ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω |
| `bot/database.py` | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö |
| `bot/config/settings.py` | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | –ë–æ—Ç –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç |
| `bot/services/moderation_service.py` | üü† –í—ã—Å–æ–∫–∏–π | –û–ø–∞—Å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–µ—Ç—è–º |
| `bot/config/forbidden_patterns.py` | üü† –í—ã—Å–æ–∫–∏–π | –û–±—Ö–æ–¥ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ |
| `bot/handlers/ai_chat.py` | üü† –í—ã—Å–æ–∫–∏–π | –ú–æ–¥–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–ø—É—â–µ–Ω–∞ |
| `bot/services/speech_service.py` | üü° –°—Ä–µ–¥–Ω–∏–π | –ì–æ–ª–æ—Å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç |

**–°–∏–≥–Ω–∞—Ç—É—Ä—ã (–ù–ï –ú–ï–ù–Ø–¢–¨):**
- `speech_service.transcribe_voice(voice_file_bytes: bytes, language: str = "ru")`
- `ai_service.generate_response(user_message, chat_history, user_age)`

## –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏:**

1. **–ü—Ä–æ–≤–µ—Ä—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞**
   - –ü—Ä–æ—á–∏—Ç–∞–π —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–±–∏—Ä–∞–µ—à—å—Å—è –∏–∑–º–µ–Ω–∏—Ç—å
   - –ü—Ä–æ–≤–µ—Ä—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
   - –£–±–µ–¥–∏—Å—å, —á—Ç–æ –ø–æ–Ω–∏–º–∞–µ—à—å —Ç–µ–∫—É—â—É—é –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã

2. **–ü—Ä–æ–≤–µ—Ä—è–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞**
   - –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–∏–∫–∞ ‚Üí –ø—Ä–æ–≤–µ—Ä—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–±–æ—Ä–∫–∏ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
   - –ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ frontend ‚Üí –ø—Ä–æ–≤–µ—Ä—å `dist/` —Ñ–∞–π–ª—ã
   - –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥–∞ ‚Üí –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –æ–Ω –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
   - –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ ‚Üí –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –æ–Ω –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è/—Ä–∞–±–æ—Ç–∞–µ—Ç

3. **–†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–π –ø—Ä–æ–±–ª–µ–º—É —Å–æ –≤—Å–µ—Ö —Å—Ç–æ—Ä–æ–Ω**
   - –ù–µ –¥–µ–ª–∞–π –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π ‚Äî –ø—Ä–æ–≤–µ—Ä—è–π —Ñ–∞–∫—Ç—ã
   - –ò—â–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –º–æ–¥—É–ª–∏
   - –ü—Ä–æ–≤–µ—Ä—è–π —Ü–µ–ø–æ—á–∫—É: –∏—Å—Ö–æ–¥–Ω–∏–∫ ‚Üí —Å–±–æ—Ä–∫–∞ ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Üí –¥–µ–ø–ª–æ–π
   - –£—á–∏—Ç—ã–≤–∞–π –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–∏–µ —á–∞—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

4. **–ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –∏ –ø—É—à–µ–º**
   - –ü—Ä–æ–≤–µ—Ä—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
   - –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Å–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
   - –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –Ω–µ—Ç –æ—á–µ–≤–∏–¥–Ω—ã—Ö –æ—à–∏–±–æ–∫
   - –ü—Ä–æ–≤–µ—Ä—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞ –Ω–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã
   - –£–±–µ–¥–∏—Å—å, —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–Ω–æ

5. **–ù–∏—á–µ–≥–æ –Ω–µ –ª–æ–º–∞–π**
   - –ü–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–æ–¥—É–ª–µ–π ‚Äî –ø—Ä–æ—á–∏—Ç–∞–π –∏—Ö –ø–æ–ª–Ω–æ—Å—Ç—å—é
   - –ü—Ä–æ–≤–µ—Ä—å –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
   - –ï—Å–ª–∏ —Å–æ–º–Ω–µ–≤–∞–µ—à—å—Å—è ‚Äî —Å–ø—Ä–æ—Å–∏ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å —Ç–µ—Å—Ç–∞–º–∏
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚Äî –ª—É—á—à–µ –º–∞–ª–µ–Ω—å–∫–∏–µ –ø—Ä–∞–≤–∫–∏, —á–µ–º –±–æ–ª—å—à–∏–µ

**–ü—Ä–∏–º–µ—Ä—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫:**
- –ò–∑–º–µ–Ω–∏–ª `frontend/index.html` ‚Üí **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –ø—Ä–æ–≤–µ—Ä—å `frontend/dist/index.html` –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏
- –ò–∑–º–µ–Ω–∏–ª Python –∫–æ–¥ ‚Üí **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –Ω–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- –ò–∑–º–µ–Ω–∏–ª –∫–æ–Ω—Ñ–∏–≥ ‚Üí **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –æ–Ω –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ò–∑–º–µ–Ω–∏–ª API ‚Üí **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –ø—Ä–æ–≤–µ—Ä—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ endpoints –∏ –∫–ª–∏–µ–Ω—Ç—ã

### –ü–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

1. **–ü—Ä–æ—á–∏—Ç–∞–π —Ñ–∞–π–ª** ‚Äî –Ω–µ –≥–∞–¥–∞–π, —á—Ç–æ –≤ –Ω—ë–º
2. **–ü—Ä–æ–≤–µ—Ä—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–≥—É—Ç —Å–ª–æ–º–∞—Ç—å –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏
3. **–ü–æ–π–º–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç** ‚Äî —ç—Ç–æ –¥–ª—è –¥–µ—Ç–µ–π, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–∞
4. **–ü—Ä–æ–≤–µ—Ä—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã** ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è frontend: –∏—Å—Ö–æ–¥–Ω–∏–∫ ‚Üí —Å–±–æ—Ä–∫–∞ ‚Üí dist

### –ö–æ–¥

- **–ú–æ–¥–µ—Ä–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞** ‚Äî –ª—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥ —á–µ—Ä–µ–∑ `ContentModerationService`
- **–ë–î —á–µ—Ä–µ–∑ context manager** ‚Äî `with get_db() as db:`
- **–°–µ—Ä–≤–∏—Å—ã –≤ bot/services/** ‚Äî –ª–æ–≥–∏–∫–∞ –Ω–µ –≤ handlers
- **–í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Pydantic** ‚Äî –Ω–∏–∫–∞–∫–∏—Ö —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ loguru** ‚Äî –Ω–µ print()

### –°—Ç–∏–ª—å

- Black (line-length=100)
- isort (profile="black")
- Docstrings –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- Type hints –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –°–µ–∫—Ä–µ—Ç—ã —Ç–æ–ª—å–∫–æ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- PII –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –í—Å–µ –≤–Ω–µ—à–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å

## –ö–æ–º–∞–Ω–¥—ã

```bash
# –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
python web_server.py

# –¢–µ—Å—Ç—ã
pytest tests/ -v

# –ü–æ–∫—Ä—ã—Ç–∏–µ
pytest tests/ --cov=bot --cov-report=html

# –õ–∏–Ω—Ç–µ—Ä—ã
black bot/ && isort bot/ && flake8 bot/
```

## –ù–µ –¥–µ–ª–∞–π

‚ùå –•–∞—Ä–¥–∫–æ–¥ —Å–µ–∫—Ä–µ—Ç–æ–≤
‚ùå –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∏–≥–Ω–∞—Ç—É—Ä –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –±–µ–∑ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
‚ùå –û–±—Ö–æ–¥ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
‚ùå Polling –≤–º–µ—Å—Ç–æ webhook –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
‚ùå `print()` –≤–º–µ—Å—Ç–æ `logger`
‚ùå –ü—Ä—è–º—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ SQLAlchemy)

## –î–µ–ª–∞–π

‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏
‚úÖ **–°–≤–µ—Ä–∫–∞ —Å –ø—Ä–æ–µ–∫—Ç–æ–º** ‚Äî –≤—Å–µ–≥–¥–∞ —Å–≤–µ—Ä—è–π—Å—è —Å —Ç–µ–∫—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–∞ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
‚úÖ **–†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–π –ø—Ä–æ–±–ª–µ–º—É —Å–æ –≤—Å–µ—Ö —Å—Ç–æ—Ä–æ–Ω** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–π —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, —Ü–µ–ø–æ—á–∫—É –∏–∑–º–µ–Ω–µ–Ω–∏–π, –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏
‚úÖ **–ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º** ‚Äî –ø—Ä–æ–≤–µ—Ä—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–±–æ—Ä–∫–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–µ—Ç–µ–π** ‚Äî –ø—Ä–æ–≤–µ—Ä—è–π –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–µ—Ç–µ–π –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
‚úÖ **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥** ‚Äî —á–∏—Ç–∞–π –∫–æ–¥ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏, –∏—Å–ø–æ–ª—å–∑—É–π type hints, –ø–∏—à–∏ —Ç–µ—Å—Ç—ã
‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** ‚Äî —Å–ª–µ–¥—É–π SOLID –ø—Ä–∏–Ω—Ü–∏–ø–∞–º, —Ä–∞–∑–¥–µ–ª—è–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã** ‚Äî –≤–∞–ª–∏–¥–∏—Ä—É–π –≤—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–µ –ª–æ–º–∞–π —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
‚úÖ **UI/UX** ‚Äî —Å–æ–∑–¥–∞–≤–∞–π –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –¥—É–º–∞–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –æ–ø—ã—Ç–µ
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

## –î–µ–ø–ª–æ–π (Railway.app)

- Push –≤ `main` ‚Üí Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç
- **Webhook:** `pandapal-bot-production.up.railway.app`
- **Frontend:** `pandapal.ru` (Cloudflare DNS)
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:** `DATABASE_URL`, `TELEGRAM_BOT_TOKEN`, `YANDEX_*`, `SECRET_KEY`
- **–†–µ–∂–∏–º:** webhook (–Ω–µ polling), `sleepApplication: false`

---

**üìå –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ:** –≠—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (alwaysApply: true). –î–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–¥–∞ —Å–º. `critical-code-protection.mdc`.
