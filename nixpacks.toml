[phases.setup]
nixPkgs = ["python313", "nodejs_20", "postgresql"]

[phases.install]
cmds = [
  "pip install -r requirements.txt",
  "cd frontend && npm install"
]

[phases.build]
cmds = [
  "cd frontend && npm run build",
  "python scripts/optimize_config.py || echo 'WARNING: Config obfuscation failed, but continuing...'",
  "python scripts/optimize_service.py || echo 'WARNING: Service obfuscation failed, but continuing...'"
]

[start]
cmd = "python web_server.py"
