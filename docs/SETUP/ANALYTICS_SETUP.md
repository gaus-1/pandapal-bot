# üìä –ì–¥–µ —Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π —Å–∞–π—Ç–∞ –∏ –±–æ—Ç–∞

## üåê –ê–ù–ê–õ–ò–¢–ò–ö–ê –°–ê–ô–¢–ê

### 1Ô∏è‚É£ **Google Analytics 4** (–ë–µ—Å–ø–ª–∞—Ç–Ω–æ)

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- üë• –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π
- üìç –ì–µ–æ–≥—Ä–∞—Ñ–∏—è (—Å—Ç—Ä–∞–Ω—ã, –≥–æ—Ä–æ–¥–∞)
- üïê –í—Ä–µ–º—è –Ω–∞ —Å–∞–π—Ç–µ
- üìÑ –ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- üì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–¥–µ—Å–∫—Ç–æ–ø/–º–æ–±–∏–ª—å–Ω—ã–µ)
- üîó –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ (–ø–æ–∏—Å–∫, –ø—Ä—è–º—ã–µ –∑–∞—Ö–æ–¥—ã, —Å–æ—Ü. —Å–µ—Ç–∏)
- üìà Real-time –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ (–∫—Ç–æ —Å–µ–π—á–∞—Å –Ω–∞ —Å–∞–π—Ç–µ)

**–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:**

1. **–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç:**
   - –ó–∞–π–¥–∏—Ç–µ: https://analytics.google.com
   - –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ Google –∞–∫–∫–∞—É–Ω—Ç–æ–º
   - –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏—è"

2. **–°–æ–∑–¥–∞–π—Ç–µ —Ä–µ—Å—É—Ä—Å:**
   - –ù–∞–∑–≤–∞–Ω–∏–µ: "PandaPal"
   - –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å: –ú–æ—Å–∫–≤–∞ (UTC+3)
   - –í–∞–ª—é—Ç–∞: RUB (—Ä—É–±–ª–∏)

3. **–î–æ–±–∞–≤—å—Ç–µ –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**
   - –í—ã–±–µ—Ä–∏—Ç–µ "–í–µ–±"
   - URL: `https://pandapal.ru`
   - –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞: "PandaPal Website"

4. **–ü–æ–ª—É—á–∏—Ç–µ ID –∏–∑–º–µ—Ä–µ–Ω–∏—è:**
   - –§–æ—Ä–º–∞—Ç: `G-XXXXXXXXXX`
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ

5. **–í—Å—Ç–∞–≤—å—Ç–µ –≤ –∫–æ–¥:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ `frontend/index.html`
   - –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É 157 –∏ 162:
   ```html
   <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
   ```
   - –ó–∞–º–µ–Ω–∏—Ç–µ `G-XXXXXXXXXX` –Ω–∞ –≤–∞—à ID (2 –º–µ—Å—Ç–∞)

6. **–ó–∞–¥–µ–ø–ª–æ–π—Ç–µ —Å–∞–π—Ç**

7. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:**
   - –ß–µ—Ä–µ–∑ 24-48 —á–∞—Å–æ–≤ –∑–∞–π–¥–∏—Ç–µ –≤ Google Analytics
   - –û—Ç–∫—Ä–æ–π—Ç–µ "–û—Ç—á–µ—Ç—ã" ‚Üí "–†–µ–∞–ª-—Ç–∞–π–º"
   - –£–≤–∏–¥–∏—Ç–µ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

**–ì–¥–µ —Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:**
- üîó https://analytics.google.com
- –í–∫–ª–∞–¥–∫–∞ "–û—Ç—á–µ—Ç—ã"
- –†–∞–∑–¥–µ–ª "–†–µ–∞–ª-—Ç–∞–π–º" - –∫—Ç–æ —Å–µ–π—á–∞—Å –Ω–∞ —Å–∞–π—Ç–µ
- –†–∞–∑–¥–µ–ª "–û–±–∑–æ—Ä" - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

---

### 2Ô∏è‚É£ **–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞** (–ë–µ—Å–ø–ª–∞—Ç–Ω–æ, –¥–ª—è –†–æ—Å—Å–∏–∏)

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- üë• –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π
- üó∫Ô∏è –ö–∞—Ä—Ç–∞ –∫–ª–∏–∫–æ–≤ (–≥–¥–µ –Ω–∞–∂–∏–º–∞—é—Ç)
- üé¨ –í–µ–±–≤–∏–∑–æ—Ä (–∑–∞–ø–∏—Å–∏ —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- üìä –ö–æ–Ω–≤–µ—Ä—Å–∏–∏ –∏ —Ü–µ–ª–∏
- üî• –¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞
- ‚ö° –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
- üì± –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º

**–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:**

1. **–°–æ–∑–¥–∞–π—Ç–µ —Å—á–µ—Ç—á–∏–∫:**
   - –ó–∞–π–¥–∏—Ç–µ: https://metrika.yandex.ru
   - –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ –Ø–Ω–¥–µ–∫—Å ID
   - –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫"

2. **–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:**
   - –ê–¥—Ä–µ—Å —Å–∞–π—Ç–∞: `https://pandapal.ru`
   - –ù–∞–∑–≤–∞–Ω–∏–µ: "PandaPal"
   - –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å: –ú–æ—Å–∫–≤–∞

3. **–í–∫–ª—é—á–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
   - ‚úÖ –í–µ–±–≤–∏–∑–æ—Ä (–∑–∞–ø–∏—Å–∏ —Å–µ—Å—Å–∏–π)
   - ‚úÖ –ö–∞—Ä—Ç–∞ –∫–ª–∏–∫–æ–≤
   - ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ö–µ—à–∞
   - ‚úÖ –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è (–µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –ø—Ä–æ–¥–∞–∂–∏)

4. **–ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–º–µ—Ä —Å—á–µ—Ç—á–∏–∫–∞:**
   - –§–æ—Ä–º–∞—Ç: 8-–∑–Ω–∞—á–Ω–æ–µ —á–∏—Å–ª–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä `12345678`
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ

5. **–í—Å—Ç–∞–≤—å—Ç–µ –≤ –∫–æ–¥:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ `frontend/index.html`
   - –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É 182 –∏ 191:
   ```html
   ym(XXXXXXXX, "init", {...});
   ```
   - –ó–∞–º–µ–Ω–∏—Ç–µ `XXXXXXXX` –Ω–∞ –≤–∞—à –Ω–æ–º–µ—Ä (2 –º–µ—Å—Ç–∞)

6. **–ó–∞–¥–µ–ø–ª–æ–π—Ç–µ —Å–∞–π—Ç**

7. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É:**
   - –ó–∞–π–¥–∏—Ç–µ –≤ –ú–µ—Ç—Ä–∏–∫—É
   - –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—á–µ—Ç—á–∏–∫–∞"
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å ‚úÖ "–°—á–µ—Ç—á–∏–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

**–ì–¥–µ —Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:**
- üîó https://metrika.yandex.ru
- –í–∫–ª–∞–¥–∫–∞ "–ü–æ—Å–µ—Ç–∏—Ç–µ–ª–∏" - –∫—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç
- –í–∫–ª–∞–¥–∫–∞ "–í–µ–±–≤–∏–∑–æ—Ä" - –∑–∞–ø–∏—Å–∏ —Å–µ—Å—Å–∏–π (–≤–∏–¥–µ–æ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–∞–π—Ç)
- –í–∫–ª–∞–¥–∫–∞ "–ö–∞—Ä—Ç—ã" - —Ç–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –∫–ª–∏–∫–æ–≤

**üí° –°–û–í–ï–¢:** –í–µ–±–≤–∏–∑–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –†–ï–ê–õ–¨–ù–û–ï –≤–∏–¥–µ–æ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∫–ª–∏–∫–∞—é—Ç –ø–æ —Å–∞–π—Ç—É!

---

### 3Ô∏è‚É£ **Mixpanel** (–ë–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ 100K —Å–æ–±—ã—Ç–∏–π/–º–µ—Å)

**–î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è:**
- üéØ User journey (–ø—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- üîÑ –ö–æ–Ω–≤–µ—Ä—Å–∏–æ–Ω–Ω—ã–µ –≤–æ—Ä–æ–Ω–∫–∏
- üß™ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- üìß Email/Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∞: https://mixpanel.com

---

## ü§ñ –ê–ù–ê–õ–ò–¢–ò–ö–ê TELEGRAM –ë–û–¢–ê

### 1Ô∏è‚É£ **–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ Telegram** (–ë–µ—Å–ø–ª–∞—Ç–Ω–æ)

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- üë• –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üìà –ì—Ä–∞—Ñ–∏–∫ —Ä–æ—Å—Ç–∞
- üìä –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –¥–Ω—è–º
- üåç –Ø–∑—ã–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ö–∞–∫ —Å–º–æ—Ç—Ä–µ—Ç—å:**

1. **–û—Ç–∫—Ä–æ–π—Ç–µ @BotFather:**
   - –ù–∞–ø–∏—à–∏—Ç–µ `/mybots`
   - –í—ã–±–µ—Ä–∏—Ç–µ `@pandapal_bot`
   - –ù–∞–∂–º–∏—Ç–µ "Bot Settings"
   - –í—ã–±–µ—Ä–∏—Ç–µ "Statistics"

2. **–ß—Ç–æ —É–≤–∏–¥–∏—Ç–µ:**
   ```
   üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π:

   üë• –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: XXXX
   üìà –ù–æ–≤—ã—Ö –∑–∞ –º–µ—Å—è—Ü: +XXX
   üí¨ –°–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—É—á–µ–Ω–æ: XXXX
   üì§ –°–æ–æ–±—â–µ–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: XXXX

   –ì—Ä–∞—Ñ–∏–∫ –ø–æ –¥–Ω—è–º ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   ```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –¢–æ–ª—å–∫–æ –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ù–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- –ù–µ—Ç —Ä–∞–∑–±–∏–≤–∫–∏ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º

---

### 2Ô∏è‚É£ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PandaPal** (–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- üë§ –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- üí¨ –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- üìä –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- ‚è∞ –í—Ä–µ–º—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- üéØ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

**–ö–∞–∫ —Å–º–æ—Ç—Ä–µ—Ç—å:**

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: **–ß–µ—Ä–µ–∑ SQL (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)**

```sql
-- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ PostgreSQL
-- –•–æ—Å—Ç: dpg-d3bvnm37mgec73a3gjbg-a.frankfurt-postgres.render.com
-- –ë–∞–∑–∞: pandapal_db
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/–ø–∞—Ä–æ–ª—å: –∏–∑ .env

-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
SELECT
    COUNT(*) as total_users,
    COUNT(CASE WHEN is_active THEN 1 END) as active_users,
    COUNT(CASE WHEN user_type = 'child' THEN 1 END) as children,
    COUNT(CASE WHEN user_type = 'parent' THEN 1 END) as parents
FROM users;

-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ –¥–Ω—è–º
SELECT
    DATE(created_at) as date,
    COUNT(*) as new_users
FROM users
GROUP BY DATE(created_at)
ORDER BY date DESC
LIMIT 30;

-- –°–∞–º—ã–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
SELECT
    u.first_name,
    u.telegram_id,
    COUNT(ch.id) as message_count
FROM users u
LEFT JOIN chat_history ch ON u.telegram_id = ch.user_telegram_id
GROUP BY u.telegram_id, u.first_name
ORDER BY message_count DESC
LIMIT 20;

-- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ —á–∞—Å–∞–º
SELECT
    EXTRACT(HOUR FROM timestamp) as hour,
    COUNT(*) as messages
FROM chat_history
WHERE timestamp >= NOW() - INTERVAL '7 days'
GROUP BY EXTRACT(HOUR FROM timestamp)
ORDER BY hour;

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
SELECT
    COUNT(*) as total_messages,
    COUNT(CASE WHEN message_type = 'user' THEN 1 END) as user_messages,
    COUNT(CASE WHEN message_type = 'ai' THEN 1 END) as ai_messages,
    MIN(timestamp) as first_message,
    MAX(timestamp) as last_message
FROM chat_history;
```

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: **–ê–¥–º–∏–Ω –∫–æ–º–∞–Ω–¥—ã –≤ –±–æ—Ç–µ**

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—ã:

```
/status - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã
/health - –ó–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–∏—Å–æ–≤
/ai_status - –°—Ç–∞—Ç—É—Å AI –º–æ–¥–µ–ª–∏
```

---

### 3Ô∏è‚É£ **Botan.io** (–î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –±–æ—Ç–æ–≤)

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- üìä –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π
- üéØ –í–æ—Ä–æ–Ω–∫–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- üë• –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üìà Retention (–≤–æ–∑–≤—Ä–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- üî• –°–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

**–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:**

1. –ó–∞–π–¥–∏—Ç–µ: https://botan.io
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å
3. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç "PandaPal"
4. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á
5. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ –≤ –∫–æ–¥ –±–æ—Ç–∞

**–ö–æ–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** (–≤ `bot/monitoring.py`):

```python
import botan

botan_token = "YOUR_BOTAN_TOKEN"

def track_event(uid, message, event_name):
    """–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è –≤ Botan"""
    botan.track(botan_token, uid, message, event_name)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
track_event(user_id, message, "button_click")
track_event(user_id, message, "ai_question_asked")
track_event(user_id, message, "homework_help_requested")
```

---

### 4Ô∏è‚É£ **–ü—Ä–æ—Å—Ç–æ–π –¥–∞—à–±–æ—Ä–¥ –¥–ª—è –ë–î** (–°–æ–∑–¥–∞—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ)

**–í–∞—Ä–∏–∞–Ω—Ç –ê: pgAdmin** (–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è PostgreSQL)

1. –°–∫–∞—á–∞–π—Ç–µ: https://www.pgadmin.org/download/
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î Render:
   - Host: `dpg-d3bvnm37mgec73a3gjbg-a.frankfurt-postgres.render.com`
   - Port: `5432`
   - Database: `pandapal_db`
   - Username/Password: –∏–∑ `.env`

4. –°–æ–∑–¥–∞–π—Ç–µ SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤

**–í–∞—Ä–∏–∞–Ω—Ç –ë: Google Data Studio** (–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã)

1. –ó–∞–π–¥–∏—Ç–µ: https://datastudio.google.com
2. –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç—á–µ—Ç
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ PostgreSQL –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫
4. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏:
   - –ì—Ä–∞—Ñ–∏–∫ —Ä–æ—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –¥–Ω—è–º
   - –¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ì–µ–æ–≥—Ä–∞—Ñ–∏—è

---

## üìä –ì–û–¢–û–í–´–ï –î–ê–®–ë–û–†–î–´ –í –ë–û–¢–ï

### –ê–¥–º–∏–Ω –∫–æ–º–∞–Ω–¥—ã (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã):

```bash
# –û—Ç–ø—Ä–∞–≤—å—Ç–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –≤ –±–æ—Ç–∞ @pandapal_bot

/status
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
# ‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# ‚Ä¢ –°–æ–æ–±—â–µ–Ω–∏–π —Å–µ–≥–æ–¥–Ω—è
# ‚Ä¢ –ó–∞–≥—Ä—É–∑–∫–∞ CPU/RAM
# ‚Ä¢ –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤

/health
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
# ‚Ä¢ –ó–¥–æ—Ä–æ–≤—å–µ –ë–î
# ‚Ä¢ –°—Ç–∞—Ç—É—Å AI
# ‚Ä¢ –û–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

/ai_status
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
# ‚Ä¢ –¢–µ–∫—É—â–∞—è –º–æ–¥–µ–ª—å AI
# ‚Ä¢ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
# ‚Ä¢ –°—Ç–∞—Ç—É—Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
```

---

## üìà –°–û–ó–î–ê–ù–ò–ï –°–û–ë–°–¢–í–ï–ù–ù–û–ì–û –î–ê–®–ë–û–†–î–ê

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ—Å—Ç–æ–π Python —Å–∫—Ä–∏–ø—Ç

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `scripts/analytics_dashboard.py`:

```python
"""
–ü—Ä–æ—Å—Ç–æ–π –¥–∞—à–±–æ—Ä–¥ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ PandaPal
"""

import os
from datetime import datetime, timedelta
from sqlalchemy import create_engine, text
from dotenv import load_dotenv

load_dotenv()

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
DATABASE_URL = os.getenv("DATABASE_URL")
engine = create_engine(DATABASE_URL)

def get_stats():
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏"""
    with engine.connect() as conn:
        # –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        total_users = conn.execute(text("SELECT COUNT(*) FROM users")).scalar()
        active_users = conn.execute(
            text("SELECT COUNT(*) FROM users WHERE is_active = true")
        ).scalar()
        total_messages = conn.execute(text("SELECT COUNT(*) FROM chat_history")).scalar()

        # –°–µ–≥–æ–¥–Ω—è—à–Ω—è—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        today = datetime.now().date()
        messages_today = conn.execute(
            text("SELECT COUNT(*) FROM chat_history WHERE DATE(timestamp) = :today"),
            {"today": today}
        ).scalar()

        # –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∑–∞ –Ω–µ–¥–µ–ª—é
        week_ago = datetime.now() - timedelta(days=7)
        new_users_week = conn.execute(
            text("SELECT COUNT(*) FROM users WHERE created_at >= :week_ago"),
            {"week_ago": week_ago}
        ).scalar()

        print("=" * 60)
        print("üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê PANDAPAL")
        print("=" * 60)
        print(f"\nüë• –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ò:")
        print(f"   –í—Å–µ–≥–æ: {total_users}")
        print(f"   –ê–∫—Ç–∏–≤–Ω—ã—Ö: {active_users}")
        print(f"   –ù–æ–≤—ã—Ö –∑–∞ –Ω–µ–¥–µ–ª—é: {new_users_week}")

        print(f"\nüí¨ –°–û–û–ë–©–ï–ù–ò–Ø:")
        print(f"   –í—Å–µ–≥–æ: {total_messages}")
        print(f"   –°–µ–≥–æ–¥–Ω—è: {messages_today}")

        # –¢–æ–ø-10 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        result = conn.execute(text("""
            SELECT
                u.first_name,
                u.telegram_id,
                COUNT(ch.id) as msg_count
            FROM users u
            LEFT JOIN chat_history ch ON u.telegram_id = ch.user_telegram_id
            GROUP BY u.telegram_id, u.first_name
            ORDER BY msg_count DESC
            LIMIT 10
        """))

        print(f"\nüèÜ –¢–û–ü-10 –ê–ö–¢–ò–í–ù–´–• –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô:")
        for i, row in enumerate(result, 1):
            print(f"   {i}. {row[0]} (@{row[1]}): {row[2]} —Å–æ–æ–±—â–µ–Ω–∏–π")

        print("\n" + "=" * 60)

if __name__ == "__main__":
    get_stats()
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python scripts/analytics_dashboard.py
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –í–µ–±-–¥–∞—à–±–æ—Ä–¥ (Flask)

–°–æ–∑–¥–∞–π—Ç–µ `scripts/web_dashboard.py`:

```python
"""
–í–µ–±-–¥–∞—à–±–æ—Ä–¥ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
–ó–∞–ø—É—Å–∫: python scripts/web_dashboard.py
–û—Ç–∫—Ä—ã—Ç—å: http://localhost:5000
"""

from flask import Flask, render_template_string
from sqlalchemy import create_engine, text
from dotenv import load_dotenv
import os

load_dotenv()

app = Flask(__name__)
engine = create_engine(os.getenv("DATABASE_URL"))

HTML_TEMPLATE = """
<!DOCTYPE html>
<html>
<head>
    <title>PandaPal Analytics</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        h1 {
            color: #4F46E5;
            text-align: center;
            margin-bottom: 30px;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            border-radius: 15px;
            color: white;
            text-align: center;
        }
        .stat-value {
            font-size: 48px;
            font-weight: bold;
            margin: 10px 0;
        }
        .stat-label {
            font-size: 16px;
            opacity: 0.9;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        th {
            background: #4F46E5;
            color: white;
            font-weight: bold;
        }
        tr:hover {
            background: #f5f5f5;
        }
    </style>
    <meta http-equiv="refresh" content="30">
</head>
<body>
    <div class="container">
        <h1>üìä PandaPal Analytics Dashboard</h1>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                <div class="stat-value">{{ total_users }}</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
                <div class="stat-value">{{ active_users }}</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">–°–æ–æ–±—â–µ–Ω–∏–π –≤—Å–µ–≥–æ</div>
                <div class="stat-value">{{ total_messages }}</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">–°–µ–≥–æ–¥–Ω—è</div>
                <div class="stat-value">{{ messages_today }}</div>
            </div>
        </div>

        <h2>üèÜ –¢–æ–ø-20 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>–ò–º—è</th>
                    <th>Telegram ID</th>
                    <th>–°–æ–æ–±—â–µ–Ω–∏–π</th>
                    <th>–¢–∏–ø</th>
                </tr>
            </thead>
            <tbody>
                {% for user in top_users %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td>{{ user[0] }}</td>
                    <td>{{ user[1] }}</td>
                    <td>{{ user[2] }}</td>
                    <td>{{ user[3] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <p style="text-align: center; color: #999; margin-top: 30px;">
            –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
        </p>
    </div>
</body>
</html>
"""

@app.route("/")
def dashboard():
    """–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–∞—à–±–æ—Ä–¥–∞"""
    with engine.connect() as conn:
        # –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        total_users = conn.execute(text("SELECT COUNT(*) FROM users")).scalar()
        active_users = conn.execute(
            text("SELECT COUNT(*) FROM users WHERE is_active = true")
        ).scalar()
        total_messages = conn.execute(text("SELECT COUNT(*) FROM chat_history")).scalar()

        from datetime import datetime
        today = datetime.now().date()
        messages_today = conn.execute(
            text("SELECT COUNT(*) FROM chat_history WHERE DATE(timestamp) = :today"),
            {"today": today}
        ).scalar() or 0

        # –¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        top_users_result = conn.execute(text("""
            SELECT
                u.first_name,
                u.telegram_id,
                COUNT(ch.id) as msg_count,
                u.user_type
            FROM users u
            LEFT JOIN chat_history ch ON u.telegram_id = ch.user_telegram_id
            GROUP BY u.telegram_id, u.first_name, u.user_type
            ORDER BY msg_count DESC
            LIMIT 20
        """))
        top_users = list(top_users_result)

    return render_template_string(
        HTML_TEMPLATE,
        total_users=total_users,
        active_users=active_users,
        total_messages=total_messages,
        messages_today=messages_today,
        top_users=top_users
    )

if __name__ == "__main__":
    print("üöÄ –ó–∞–ø—É—Å–∫ –¥–∞—à–±–æ—Ä–¥–∞ –Ω–∞ http://localhost:5000")
    app.run(debug=True, host="0.0.0.0", port=5000)
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Flask
pip install flask

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∞—à–±–æ—Ä–¥
python scripts/web_dashboard.py

# –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
http://localhost:5000
```

---

### 3Ô∏è‚É£ **Metabase** (–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π BI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç)

**–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã –±–µ–∑ –∫–æ–¥–∞:**

1. –°–∫–∞—á–∞–π—Ç–µ: https://www.metabase.com/start/oss/
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Metabase
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ PostgreSQL –±–∞–∑—É PandaPal
4. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ drag-and-drop

**–ü—Ä–∏–º–µ—Ä—ã –≥—Ä–∞—Ñ–∏–∫–æ–≤:**
- üìà –†–æ—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –¥–Ω—è–º
- üî• –¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- üåç –ì–µ–æ–≥—Ä–∞—Ñ–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üéØ –ö–æ–Ω–≤–µ—Ä—Å–∏—è Free ‚Üí Premium

---

## üéØ –ß–¢–û –û–¢–°–õ–ï–ñ–ò–í–ê–¢–¨

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:

#### **–î–ª—è —Å–∞–π—Ç–∞:**
- üë• –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏/–¥–µ–Ω—å
- üîó CTR (–∫–ª–∏–∫–∏ –Ω–∞ "–ù–∞—á–∞—Ç—å –≤ Telegram")
- ‚è±Ô∏è –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –Ω–∞ —Å–∞–π—Ç–µ (—Ü–µ–ª—å: > 2 –º–∏–Ω)
- üìâ –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å –æ—Ç–∫–∞–∑–æ–≤ (—Ü–µ–ª—å: < 50%)
- üìÑ –ì–ª—É–±–∏–Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (—Ü–µ–ª—å: > 2 —Å—Ç—Ä–∞–Ω–∏—Ü—ã)

#### **–î–ª—è –±–æ—Ç–∞:**
- üìà –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏/–¥–µ–Ω—å
- üí¨ –°—Ä–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ü–µ–ª—å: > 10)
- üîÑ Retention (–≤–æ–∑–≤—Ä–∞—Ç —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π, —Ü–µ–ª—å: > 30%)
- ‚≠ê –ö–æ–Ω–≤–µ—Ä—Å–∏—è Free ‚Üí Premium (—Ü–µ–ª—å: > 5%)
- üéØ Engagement rate (–∞–∫—Ç–∏–≤–Ω—ã–µ/–≤—Å–µ–≥–æ, —Ü–µ–ª—å: > 40%)

---

## üì± –ú–û–ë–ò–õ–¨–ù–û–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–ï –î–õ–Ø –ê–ù–ê–õ–ò–¢–ò–ö–ò

### Google Analytics App (iOS/Android)

- –°–∫–∞—á–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ "Google Analytics"
- –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ –≤–∞—à–∏–º Google –∞–∫–∫–∞—É–Ω—Ç–æ–º
- –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ—Å—É—Ä—Å "PandaPal"
- –°–º–æ—Ç—Ä–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ

### –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ App (iOS/Android)

- –°–∫–∞—á–∞–π—Ç–µ "–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞"
- –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ –Ø–Ω–¥–µ–∫—Å ID
- –í—ã–±–µ—Ä–∏—Ç–µ —Å—á–µ—Ç—á–∏–∫ "PandaPal"
- –ü–æ–ª—É—á–∞–π—Ç–µ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤—Å–ø–ª–µ—Å–∫–∞—Ö —Ç—Ä–∞—Ñ–∏–∫–∞

---

## üö® –ù–ê–°–¢–†–û–ô–ö–ê –ê–õ–ï–†–¢–û–í

### Google Analytics:

1. –ó–∞–π–¥–∏—Ç–µ –≤ GA4
2. "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä" ‚Üí "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è"
3. –°–æ–∑–¥–∞–π—Ç–µ –∞–ª–µ—Ä—Ç:
   - –ù–∞–∑–≤–∞–Ω–∏–µ: "–†–µ–∑–∫–∏–π —Ä–æ—Å—Ç —Ç—Ä–∞—Ñ–∏–∫–∞"
   - –£—Å–ª–æ–≤–∏–µ: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ > 1000 –∑–∞ –¥–µ–Ω—å
   - Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞:

1. –ó–∞–π–¥–∏—Ç–µ –≤ –ú–µ—Ç—Ä–∏–∫—É
2. "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" ‚Üí "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
3. –°–æ–∑–¥–∞–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:
   - –ü–∞–¥–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ > 50%
   - –†–æ—Å—Ç –æ—Ç–∫–∞–∑–æ–≤ > 70%
   - Email/Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

---

## üìä –ü–†–ò–ú–ï–†–´ –û–¢–ß–ï–¢–û–í

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è):

```python
# scripts/daily_report.py
"""–û—Ç–ø—Ä–∞–≤–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞ –≤ Telegram"""

import os
from datetime import datetime, timedelta
from sqlalchemy import create_engine, text
from telegram import Bot
import asyncio

async def send_daily_report():
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏"""
    bot = Bot(token=os.getenv("TELEGRAM_BOT_TOKEN"))
    admin_id = 963126718  # –í–∞—à Telegram ID

    # –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    engine = create_engine(os.getenv("DATABASE_URL"))
    with engine.connect() as conn:
        today = datetime.now().date()
        yesterday = today - timedelta(days=1)

        new_users_today = conn.execute(
            text("SELECT COUNT(*) FROM users WHERE DATE(created_at) = :today"),
            {"today": today}
        ).scalar()

        messages_today = conn.execute(
            text("SELECT COUNT(*) FROM chat_history WHERE DATE(timestamp) = :today"),
            {"today": today}
        ).scalar()

        total_users = conn.execute(text("SELECT COUNT(*) FROM users")).scalar()

    # –§–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç—á–µ—Ç
    report = f"""
üìä <b>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç PandaPal</b>
üìÖ {today.strftime('%d.%m.%Y')}

üë• <b>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:</b>
‚Ä¢ –ù–æ–≤—ã—Ö –∑–∞ —Å–µ–≥–æ–¥–Ω—è: {new_users_today}
‚Ä¢ –í—Å–µ–≥–æ: {total_users}

üí¨ <b>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:</b>
‚Ä¢ –°–æ–æ–±—â–µ–Ω–∏–π —Å–µ–≥–æ–¥–Ω—è: {messages_today}

üîó <b>–°—Å—ã–ª–∫–∏:</b>
‚Ä¢ –°–∞–π—Ç: https://pandapal.ru
‚Ä¢ –ë–æ—Ç: @pandapal_bot
‚Ä¢ Render: https://dashboard.render.com

#–æ—Ç—á–µ—Ç #—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
"""

    await bot.send_message(admin_id, report, parse_mode="HTML")
    print(f"‚úÖ –û—Ç—á–µ—Ç –∑–∞ {today} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω")

if __name__ == "__main__":
    asyncio.run(send_daily_report())
```

**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (cron –Ω–∞ Render):**
```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ Render Cron Job:
# –ó–∞–ø—É—Å–∫ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00 —É—Ç—Ä–∞
0 9 * * * python scripts/daily_report.py
```

---

## üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –î–ê–ù–ù–´–•

### –í–∞–∂–Ω–æ:
- üîí –ù–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ –¥–∞—à–±–æ—Ä–¥—ã –æ—Ç–∫—Ä—ã—Ç–æ
- üîë –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è –¥–æ—Å—Ç—É–ø–∞
- üìä –ê–Ω–æ–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üõ°Ô∏è –°–æ–±–ª—é–¥–∞–π—Ç–µ GDPR/152-–§–ó

---

## ‚úÖ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (5 –º–∏–Ω—É—Ç):

1. **Google Analytics:**
   - –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç: https://analytics.google.com
   - –ü–æ–ª—É—á–∏—Ç–µ ID: `G-XXXXXXXXXX`
   - –í—Å—Ç–∞–≤—å—Ç–µ –≤ `frontend/index.html` (—Å—Ç—Ä–æ–∫–∏ 157, 162)
   - –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ —Å–∞–π—Ç

2. **–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞:**
   - –°–æ–∑–¥–∞–π—Ç–µ —Å—á–µ—Ç—á–∏–∫: https://metrika.yandex.ru
   - –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–º–µ—Ä: `12345678`
   - –í—Å—Ç–∞–≤—å—Ç–µ –≤ `frontend/index.html` (—Å—Ç—Ä–æ–∫–∏ 182, 191)
   - –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ —Å–∞–π—Ç

3. **Telegram Analytics:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ @BotFather
   - `/mybots` ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ ‚Üí "Statistics"
   - –ì–æ—Ç–æ–≤–æ! –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞

4. **SQL –∑–∞–ø—Ä–æ—Å—ã:**
   - –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î —á–µ—Ä–µ–∑ psql –∏–ª–∏ pgAdmin
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã –≤—ã—à–µ
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ –∑–∞–∫–ª–∞–¥–∫–∏

---

## üìû –ü–û–î–î–ï–†–ñ–ö–ê

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π:
- üìß Email: support@pandapal.ru
- üí¨ Telegram: @pandapal_support

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–°–£–†–°–´

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- Google Analytics: https://support.google.com/analytics
- –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞: https://yandex.ru/support/metrica
- Telegram Bot Analytics: https://core.telegram.org/bots/api#getting-updates

### –ö—É—Ä—Å—ã:
- Google Analytics Academy (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- –Ø–Ω–¥–µ–∫—Å.–ü—Ä–∞–∫—Ç–∏–∫—É–º - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- DataCamp - Data Analysis

---

**–ù–∞—á–Ω–∏—Ç–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤–∞—à–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —É–∂–µ —Å–µ–≥–æ–¥–Ω—è! üìäüöÄ**

*–î–æ–∫—É–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª–µ–Ω: 2025-10-08*
