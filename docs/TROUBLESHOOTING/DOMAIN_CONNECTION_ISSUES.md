# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã "–°–∞–π—Ç –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ—Ç–∫—Ä—ã—Ç—å `https://pandapal.ru` –±—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- "–ù–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–∞–π—Ç—É"
- "–°–∞–π—Ç –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"
- "ERR_CONNECTION_REFUSED"

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ (–ø–æ—à–∞–≥–æ–≤–æ)

### **–®–ê–ì 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Railway –¥–æ–º–µ–Ω**

1. –ó–∞–π–¥–∏ –≤ **Railway Dashboard**: https://railway.app/dashboard
2. –û—Ç–∫—Ä–æ–π –ø—Ä–æ–µ–∫—Ç **pandapal-bot-production** (–∏–ª–∏ –∫–∞–∫ —É —Ç–µ–±—è –Ω–∞–∑–≤–∞–Ω)
3. –ü–µ—Ä–µ–π–¥–∏ –≤ **Settings** ‚Üí **Networking** ‚Üí **Domains**
4. **–°–∫–æ–ø–∏—Ä—É–π Railway URL** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `web-production-725aa.up.railway.app`)

**–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω:**
- –í–∫–ª–∞–¥–∫–∞ **Deployments** ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **Active** ‚úÖ

---

### **–®–ê–ì 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Cloudflare DNS**

1. –ó–∞–π–¥–∏ –≤ **Cloudflare Dashboard**: https://dash.cloudflare.com
2. –í—ã–±–µ—Ä–∏ –¥–æ–º–µ–Ω **pandapal.ru**
3. –ü–µ—Ä–µ–π–¥–∏ –≤ **DNS** ‚Üí **Records**

**–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏:**

| Type | Name | Target | Proxy |
|------|------|--------|-------|
| CNAME | `@` | `web-production-725aa.up.railway.app` | ‚úÖ Proxied (–æ—Ä–∞–Ω–∂–µ–≤–æ–µ –æ–±–ª–∞–∫–æ) |
| CNAME | `www` | `web-production-725aa.up.railway.app` | ‚úÖ Proxied |

**‚ö†Ô∏è –í–ê–ñ–ù–û:**
- **Target** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–¢–û–ß–ù–û** –∫–∞–∫ –≤ Railway (—Å–∫–æ–ø–∏—Ä—É–π –∏–∑ Railway)
- **Proxy** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **Proxied** (–æ—Ä–∞–Ω–∂–µ–≤–æ–µ –æ–±–ª–∞–∫–æ), –ù–ï "DNS only" (—Å–µ—Ä–æ–µ)

**–ï—Å–ª–∏ –∑–∞–ø–∏—Å–µ–π –Ω–µ—Ç –∏–ª–∏ –æ–Ω–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ:**
1. –£–¥–∞–ª–∏ —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏
2. –î–æ–±–∞–≤—å –Ω–æ–≤—ã–µ:
   - Type: **CNAME**
   - Name: **@** (–∏–ª–∏ –æ—Å—Ç–∞–≤—å –ø—É—Å—Ç—ã–º)
   - Target: **—Ç–≤–æ–π-railway-url.up.railway.app** (–∏–∑ –®–ê–ì 1)
   - Proxy: **Proxied** ‚úÖ
   - TTL: **Auto**
3. –°–æ—Ö—Ä–∞–Ω–∏

---

### **–®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSL –≤ Cloudflare**

1. –í Cloudflare ‚Üí **SSL/TLS** ‚Üí **Overview**
2. –†–µ–∂–∏–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: **Flexible** –∏–ª–∏ **Full (strict)**
   - –ï—Å–ª–∏ **Off** ‚Üí –∏–∑–º–µ–Ω–∏ –Ω–∞ **Flexible** ‚úÖ

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
- **SSL/TLS** ‚Üí **Edge Certificates**:
  - Always Use HTTPS: **ON** ‚úÖ
  - Automatic HTTPS Rewrites: **ON** ‚úÖ

---

### **–®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫—É –¥–æ–º–µ–Ω–∞ –≤ Railway**

1. –í Railway ‚Üí **Settings** ‚Üí **Networking** ‚Üí **Custom Domains**
2. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã:
   - `pandapal.ru`
   - `www.pandapal.ru` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ï—Å–ª–∏ –¥–æ–º–µ–Ω–æ–≤ –Ω–µ—Ç:**
1. –ù–∞–∂–º–∏ **"Add Custom Domain"**
2. –í–≤–µ–¥–∏: `pandapal.ru`
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–¥–∞—Å—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–ø–æ–¥–æ–∂–¥–∏ 2-5 –º–∏–Ω—É—Ç)

---

### **–®–ê–ì 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç**

**–ü—Ä–æ–≤–µ—Ä—å Railway URL –Ω–∞–ø—Ä—è–º—É—é:**
```
https://web-production-725aa.up.railway.app/health
```

**–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:**
```json
{
  "status": "ok",
  "mode": "webhook",
  ...
}
```

**–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ Railway (Deployments ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π ‚Üí Logs)
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω

---

### **–®–ê–ì 6: –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à DNS**

**–ù–∞ Windows:**
```powershell
ipconfig /flushdns
```

**–ù–∞ Mac/Linux:**
```bash
sudo dscacheutil -flushcache
# –∏–ª–∏
sudo systemd-resolve --flush-caches
```

**–í –±—Ä–∞—É–∑–µ—Ä–µ:**
- Chrome: `Ctrl+Shift+Del` ‚Üí –æ—á–∏—Å—Ç–∏—Ç—å –∫–µ—à
- –ò–ª–∏ –æ—Ç–∫—Ä–æ–π –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ

---

### **–®–ê–ì 7: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å NS-–∑–∞–ø–∏—Å–∏ (–µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ)**

**–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –¥–æ–º–µ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Cloudflare NS:**
```bash
nslookup -type=NS pandapal.ru
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
nameserver = alice.ns.cloudflare.com
nameserver = bob.ns.cloudflare.com
```

**–ï—Å–ª–∏ –Ω–µ Cloudflare NS:**
1. –ó–∞–π–¥–∏ –≤ **reg.ru** ‚Üí —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–æ–º
2. –ù–∞–π–¥–∏ —Ä–∞–∑–¥–µ–ª **"NS-—Å–µ—Ä–≤–µ—Ä—ã"** –∏–ª–∏ **"DNS"**
3. –ó–∞–º–µ–Ω–∏ –Ω–∞ NS –æ—Ç Cloudflare (–æ–Ω–∏ –ø–æ–∫–∞–∑–∞–Ω—ã –≤ Cloudflare Dashboard)

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ 1: Railway —Ä–∞–±–æ—Ç–∞–µ—Ç?**
```
https://web-production-725aa.up.railway.app/health
```
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ DNS/Cloudflare
‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ Railway (–ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏)

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ 2: DNS —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è?**
```bash
nslookup pandapal.ru
```
‚úÖ –†–µ–∑–æ–ª–≤–∏—Ç—Å—è ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ SSL/–ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–∏
‚ùå –ù–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ DNS (–ø—Ä–æ–≤–µ—Ä—å Cloudflare)

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ 3: Cloudflare –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç?**
–í Cloudflare ‚Üí DNS ‚Üí Records:
- **Proxy** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **Proxied** (–æ—Ä–∞–Ω–∂–µ–≤–æ–µ –æ–±–ª–∞–∫–æ) ‚úÖ
- –ù–ï "DNS only" (—Å–µ—Ä–æ–µ) ‚ùå

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### **–û—à–∏–±–∫–∞ 1: "DNS only" –≤–º–µ—Å—Ç–æ "Proxied"**
**–†–µ—à–µ–Ω–∏–µ:** –í Cloudflare ‚Üí DNS ‚Üí –Ω–∞–∂–º–∏ –Ω–∞ —Å–µ—Ä–æ–µ –æ–±–ª–∞–∫–æ ‚Üí –≤—ã–±–µ—Ä–∏ "Proxied" ‚úÖ

### **–û—à–∏–±–∫–∞ 2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Railway URL**
**–†–µ—à–µ–Ω–∏–µ:** –°–∫–æ–ø–∏—Ä—É–π —Ç–æ—á–Ω—ã–π URL –∏–∑ Railway Settings ‚Üí Domains

### **–û—à–∏–±–∫–∞ 3: –î–æ–º–µ–Ω –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –≤ Railway**
**–†–µ—à–µ–Ω–∏–µ:** Railway ‚Üí Settings ‚Üí Custom Domains ‚Üí Add Domain

### **–û—à–∏–±–∫–∞ 4: SSL —Ä–µ–∂–∏–º "Off"**
**–†–µ—à–µ–Ω–∏–µ:** Cloudflare ‚Üí SSL/TLS ‚Üí Overview ‚Üí Flexible ‚úÖ

---

## üìû –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ

1. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ Railway** (Deployments ‚Üí Logs)
2. **–ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å Cloudflare** (https://www.cloudflarestatus.com/)
3. **–ü–æ–¥–æ–∂–¥–∏ 10-30 –º–∏–Ω—É—Ç** –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π DNS (–º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∞)
4. **–ü–æ–ø—Ä–æ–±—É–π –¥—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä** –∏–ª–∏ —Ä–µ–∂–∏–º –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ

---

## ‚úÖ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–°–∞–π—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è:
- ‚úÖ `https://pandapal.ru` ‚Üí Frontend (React)
- ‚úÖ `https://pandapal.ru/health` ‚Üí Health check
- ‚úÖ `https://pandapal.ru/api/miniapp/auth` ‚Üí API
