<div align="center">

<img src="https://raw.githubusercontent.com/gaus-1/pandapal-bot/main/frontend/public/logo.png" alt="PandaPal Logo" width="200">

# PandaPal

–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —à–∫–æ–ª—å–Ω–∏–∫–æ–≤ 1-9 –∫–ª–∞—Å—Å–æ–≤ —Å Telegram-–±–æ—Ç–æ–º –∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º. –ü–æ–º–æ–≥–∞–µ—Ç –¥–µ—Ç—è–º —É—á–∏—Ç—å—Å—è –ø–æ –≤—Å–µ–º –ø—Ä–µ–¥–º–µ—Ç–∞–º —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

[![Python](https://img.shields.io/badge/python-3.13-blue.svg)](https://www.python.org/)
[![React](https://img.shields.io/badge/React-19-61dafb?logo=react)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5-3178c6?logo=typescript)](https://www.typescriptlang.org/)
[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)
[![Pre-commit](https://img.shields.io/badge/pre--commit-enabled-brightgreen?logo=pre-commit)](https://github.com/pre-commit/pre-commit)
[![Railway Deploy](https://img.shields.io/badge/deploy-Railway-purple?logo=railway)](https://railway.app)
[![License](https://img.shields.io/badge/license-Proprietary-red.svg)](LICENSE)

[–°–∞–π—Ç](https://pandapal.ru) ‚Ä¢ [Telegram –ë–æ—Ç](https://t.me/PandaPalBot)

</div>

## –û –ø—Ä–æ–µ–∫—Ç–µ

PandaPal ‚Äî –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –ø–æ–º–æ—â–∏ –≤ —É—á–µ–±–µ. –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç 24/7 –∏ –ø–æ–º–æ–≥–∞–µ—Ç –¥–µ—Ç—è–º —Å –¥–æ–º–∞—à–Ω–∏–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏, –æ–±—ä—è—Å–Ω—è–µ—Ç —Å–ª–æ–∂–Ω—ã–µ —Ç–µ–º—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–∑—É—á–µ–Ω–∏–µ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/gaus-1/pandapal-bot.git
cd pandapal-bot

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Python
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp config/env.template .env
# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ API –∫–ª—é—á–∞–º–∏

# –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
alembic upgrade head

# –ó–∞–ø—É—Å–∫ backend
python web_server.py

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ - –∑–∞–ø—É—Å–∫ frontend
cd frontend
npm install
npm run dev
```

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ: —Å–º. [docs/](docs/)

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ø—Ä–µ–º–∏—É–º –∫–∞—á–µ—Å—Ç–≤–∞** ‚Äî –≥–ª—É–±–æ–∫–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –±–∞–∑–µ YandexGPT Pro —Å —É—á–µ—Ç–æ–º –í–°–ï–• —Å–ª–æ–≤ –∑–∞–ø—Ä–æ—Å–∞, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –∫–∞–∫ —É –ª—É—á—à–∏—Ö —Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–æ–≤
- **–ü–æ–º–æ—â—å –ø–æ –í–°–ï–ú —à–∫–æ–ª—å–Ω—ã–º –ø—Ä–µ–¥–º–µ—Ç–∞–º** ‚Äî –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –∞–ª–≥–µ–±—Ä–∞, –≥–µ–æ–º–µ—Ç—Ä–∏—è, —Ä—É—Å—Å–∫–∏–π, –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞, –∞–Ω–≥–ª–∏–π—Å–∫–∏–π, –Ω–µ–º–µ—Ü–∫–∏–π, —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π, –∏—Å–ø–∞–Ω—Å–∫–∏–π, –∏—Å—Ç–æ—Ä–∏—è, –æ–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ, –≥–µ–æ–≥—Ä–∞—Ñ–∏—è, —Ñ–∏–∑–∏–∫–∞, —Ö–∏–º–∏—è, –±–∏–æ–ª–æ–≥–∏—è, –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞, –æ–∫—Ä—É–∂–∞—é—â–∏–π –º–∏—Ä
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ –≤—Å–µ–º –ø—Ä–µ–¥–º–µ—Ç–∞–º** ‚Äî –≥—Ä–∞—Ñ–∏–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π, —Ç–∞–±–ª–∏—Ü—ã —É–º–Ω–æ–∂–µ–Ω–∏—è/—Å–ª–æ–∂–µ–Ω–∏—è/–¥–µ–ª–µ–Ω–∏—è, —Ç–∞–±–ª–∏—Ü–∞ –∑–Ω–∞—á–µ–Ω–∏–π –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö –∫–æ—Ä–Ω–µ–π (‚àö1‚Äì‚àö50), –∫–∞—Ä—Ç—ã —Å—Ç—Ä–∞–Ω –∏ –≥–æ—Ä–æ–¥–æ–≤ —Å –≥—Ä–∞–Ω–∏—Ü–∞–º–∏, –∫–ª–∏–º–∞—Ç–æ–≥—Ä–∞–º–º—ã –ø—Ä–∏—Ä–æ–¥–Ω—ã—Ö –∑–æ–Ω, –±–ª–æ–∫-—Å—Ö–µ–º—ã –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤, –≥—Ä–∞—Ñ–∏–∫–∏ –ø–ª–∞–≤–ª–µ–Ω–∏—è –∏ –Ω–∞–≥—Ä–µ–≤–∞–Ω–∏—è, –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ú–µ–Ω–¥–µ–ª–µ–µ–≤–∞
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π** ‚Äî —Ñ–æ—Ç–æ —É—Å–ª–æ–≤–∏—è + —Å–≤–æ—ë —Ä–µ—à–µ–Ω–∏–µ ‚Üí –ø–∞–Ω–¥–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç, –Ω–∞–π–¥–µ—Ç –æ—à–∏–±–∫–∏, –∏—Å–ø—Ä–∞–≤–∏—Ç –∏ –æ–±—ä—è—Å–Ω–∏—Ç
- **–§–æ—Ç–æ –∑–∞–¥–∞—á** ‚Äî —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ —É—á–µ–±–Ω–∏–∫–æ–≤ –∏ —Ç–µ—Ç—Ä–∞–¥–µ–π —á–µ—Ä–µ–∑ Vision API —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º —Ä–µ—à–µ–Ω–∏—è
- **–ì–æ–ª–æ—Å–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã** ‚Äî —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ —á–µ—Ä–µ–∑ SpeechKit STT —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º (¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å¬ª / ¬´–ò—Å–ø—Ä–∞–≤–∏—Ç—å¬ª) –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ AI
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç–∏–Ω–æ–∫ –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é —á–µ—Ä–µ–∑ YandexART
- **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –≤–∑—Ä–æ—Å–ª—ã—Ö —Ç–µ–º** ‚Äî –¥–µ–Ω—å–≥–∏, –±–∞–Ω–∫–∏, –Ω–∞–ª–æ–≥–∏, –ñ–ö–£, –¥–æ–∫—É–º–µ–Ω—Ç—ã, –∑–¥–æ—Ä–æ–≤—å–µ –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ –≤–∑—Ä–æ—Å–ª–æ–π –∂–∏–∑–Ω–∏
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ** ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ç–µ–º, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–¥ —É—Ä–æ–≤–µ–Ω—å —É—á–µ–Ω–∏–∫–∞
- **Enhanced RAG —Å–∏—Å—Ç–µ–º–∞** ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π RAG —Å —Å–µ–º–∞–Ω—Ç–∏–∫–æ–π –∏ –≤–µ–∫—Ç–æ—Ä–∞–º–∏: –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ (–≤–µ–∫—Ç–æ—Ä–Ω—ã–π pgvector + keyword), —Ç–∞–±–ª–∏—Ü–∞ `knowledge_embeddings`, VectorSearchService, –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∫–æ–º–ø—Ä–µ—Å—Å–∏—è (75‚Äì90%), —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∫–µ—à
- Streaming –æ—Ç–≤–µ—Ç—ã —á–µ—Ä–µ–∑ Server-Sent Events –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ –¥–ª—è 5 —è–∑—ã–∫–æ–≤
- –ò–≥—Ä—ã PandaPalGo: –ö—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏, –®–∞—à–∫–∏ —Å —É–º–Ω—ã–º –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–º, 2048, –≠—Ä—É–¥–∏—Ç (—Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤)
- –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Å XP, —É—Ä–æ–≤–Ω—è–º–∏ –∏ –Ω–∞–≥—Ä–∞–¥–∞–º–∏
- Premium –ø–æ–¥–ø–∏—Å–∫–∏ —á–µ—Ä–µ–∑ YooKassa —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫–∞—Ä—Ç
- **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞** ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –∏ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤; –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞ –æ–ø–ª–∞—Ç—ã –ø–æ —Å—Å—ã–ª–∫–µ, –º–µ—Å—è—á–Ω—ã–π –æ—Ç—á—ë—Ç (1‚Äì30 —á–∏—Å–ª–æ)
- –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–µ—Ç–µ–π (150+ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤)
- –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞

–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –∏ –ø–∞—Ä—Ç–Ω—ë—Ä—ã –ø–æ–ª—É—á–∞—é—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –≤–∏–¥–∞ `https://t.me/PandaPalBot?startapp=ref_<telegram_id>`. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –ø–µ—Ä–µ—à–µ–¥—à–∏–µ –ø–æ —Å—Å—ã–ª–∫–µ –∏ –æ–ø–ª–∞—Ç–∏–≤—à–∏–µ –ø–æ–¥–ø–∏—Å–∫—É, —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ –ë–î; —Ä–µ—Ñ–µ—Ä–µ—Ä—É –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ (—Å—É–º–º–∞ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `REFERRAL_PAYOUT_RUB`). –ú–µ—Å—è—á–Ω—ã–π –æ—Ç—á—ë—Ç –∑–∞ –ø–µ—Ä–∏–æ–¥ 1‚Äì30/31 —á–∏—Å–ª–æ: `python scripts/referral_report.py [--year YYYY] [--month MM]`. –í—ã–ø–ª–∞—Ç—ã —Ä–µ—Ñ–µ—Ä–µ—Ä–∞–º –ø—Ä–æ–∏–∑–≤–æ–¥—è—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø–æ –¥–∞–Ω–Ω—ã–º –æ—Ç—á—ë—Ç–∞.

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Backend

- Python 3.13, aiogram 3.24, aiohttp 3.13
- SQLAlchemy 2.0, PostgreSQL 17 + pgvector, Alembic
- Redis 7.1 –¥–ª—è —Å–µ—Å—Å–∏–π (Upstash)
- Yandex Cloud: YandexGPT Pro, SpeechKit STT, Vision OCR, Translate API, Embeddings API (text-search-doc/query)
- YooKassa 3.9.0 –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π (–ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º)
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: temperature=0.4, max_tokens=8192

### Frontend

- React 19, TypeScript 5, Vite 7
- TanStack Query 5, Zustand 5
- Tailwind CSS 3
- Telegram Mini App SDK 8.0

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- Railway.app –¥–ª—è —Ö–æ—Å—Ç–∏–Ω–≥–∞ (webhook —Ä–µ–∂–∏–º, 24/7): web-—Å–µ—Ä–≤–∏—Å + pgvector (PostgreSQL —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º)
- Cloudflare –¥–ª—è DNS, SSL, CDN
- GitHub Actions –¥–ª—è CI/CD
- Upstash Redis –¥–ª—è —Å–µ—Å—Å–∏–π
- Keep-alive –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–Ω–∞ –Ω–∞ Railway FREE

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
PandaPal/
‚îú‚îÄ‚îÄ bot/                     # Backend –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ handlers/            # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ Telegram
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai_chat/         # –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ AI —á–∞—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ text.py      # –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä-pipeline)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ voice.py     # –ì–æ–ª–æ—Å–æ–≤—ã–µ –∏ –∞—É–¥–∏–æ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ image.py     # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ document.py  # –î–æ–∫—É–º–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ helpers.py   # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (Premium, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏, –æ—Ç–ø—Ä–∞–≤–∫–∞)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.py         # –ö–æ–º–∞–Ω–¥–∞ /start
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment_handler.py   # –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ premium_handler.py   # Premium-–ø–æ–¥–ø–∏—Å–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...              # –û—Å—Ç–∞–ª—å–Ω—ã–µ handlers
‚îÇ   ‚îú‚îÄ‚îÄ services/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (AI, –ø–ª–∞—Ç–µ–∂–∏, –∏–≥—Ä—ã, Mini App, RAG)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai_service_solid.py          # –§–∞—Å–∞–¥ –Ω–∞–¥ Yandex Cloud AI
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ yandex_cloud_service.py      # –ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π Yandex Cloud –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ yandex_ai_response_generator.py  # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è AI –æ—Ç–≤–µ—Ç–æ–≤ —Å RAG
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rag/                         # Enhanced RAG —Å–∏—Å—Ç–µ–º–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vector_search.py         # –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ (pgvector, knowledge_embeddings)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ query_expander.py        # –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ (multi-query)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ reranker.py              # –ü–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ semantic_cache.py        # –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ compressor.py            # –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∫–æ–º–ø—Ä–µ—Å—Å–∏—è (75-90%)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cache/                       # –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø–∞–∫–µ—Ç, SOLID SRP)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ memory.py               # MemoryCache (LRU)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service.py              # CacheService (Redis + Memory), cached –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ specialized.py          # UserCache, ModerationCache, AIResponseCache
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ embeddings_service.py        # –í–µ–∫—Ç–æ—Ä–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ (Yandex Embeddings API)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ miniapp/                     # –°–µ—Ä–≤–∏—Å—ã Mini App (–ø–∞–∫–µ—Ç)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat_context_service.py  # –ö–æ–Ω—Ç–µ–∫—Å—Ç —á–∞—Ç–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ intent_service.py        # –î–µ—Ç–µ–∫—Ü–∏—è intent'–æ–≤ (—Ç–∞–±–ª–∏—Ü—ã, –≥—Ä–∞—Ñ–∏–∫–∏ –∏ —Ç.–ø.)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ audio_service.py         # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ photo_service.py         # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ/–¥–æ–º–∞—à–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ visualization_service.py # –î–µ—Ç–µ–∫—Ç–æ—Ä –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ games_service/               # –ò–≥—Ä—ã PandaPalGo (–ø–∞–∫–µ—Ç, mixin-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ session.py              # CRUD —Å–µ—Å—Å–∏–π, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tic_tac_toe.py          # –ö—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ checkers.py             # –®–∞—à–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ game_2048.py            # 2048
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ erudite.py              # –≠—Ä—É–¥–∏—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ game_engines/                # –î–≤–∏–∂–∫–∏ –∏–≥—Ä
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tic_tac_toe.py          # TicTacToe engine
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ checkers.py             # Checkers engine
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ game_2048.py            # 2048 engine
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ erudite.py              # Erudite engine
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ visualization_service.py     # –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ visualization/               # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤/—Ç–∞–±–ª–∏—Ü –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ detector.py              # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–µ—Ç–µ–∫—Ü–∏–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ detectors/               # –ú–æ–¥—É–ª–∏ –¥–µ—Ç–µ–∫—Ü–∏–∏ (SOLID SRP)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ request_words.py     # –¢—Ä–∏–≥–≥–µ—Ä–Ω—ã–µ —Å–ª–æ–≤–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemes.py           # –°—Ö–µ–º—ã (–∞—Å—Ç—Ä–æ–Ω–æ–º–∏—è, –±–∏–æ–ª–æ–≥–∏—è, –î–ù–ö)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ diagrams.py          # –î–∏–∞–≥—Ä–∞–º–º—ã (bar, pie, line, scatter)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ maps.py              # –ö–∞—Ä—Ç—ã (—Ä–∞–π–æ–Ω—ã, –≥–æ—Ä–æ–¥–∞, —Å—Ç—Ä–∞–Ω—ã)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ physics.py           # –ì—Ä–∞—Ñ–∏–∫–∏ —Ñ–∏–∑–∏–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ math_graphs.py       # –ì—Ä–∞—Ñ–∏–∫–∏ –º–∞—Ç. —Ñ—É–Ω–∫—Ü–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tables_and_diagrams.py # –ü—Ä–µ–¥–º–µ—Ç–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (–≤ —Ç.—á. ‚àö1‚Äì‚àö50)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ math/                    # –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sciences/                # –§–∏–∑–∏–∫–∞, —Ö–∏–º–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ social/                  # –ì–µ–æ–≥—Ä–∞—Ñ–∏—è, –∏—Å—Ç–æ—Ä–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ languages/               # –¢–∞–±–ª–∏—Ü—ã –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ other/                   # –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞, –æ–∫—Ä—É–∂–∞—é—â–∏–π –º–∏—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ homework_service.py              # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π –ø–æ —Ñ–æ—Ç–æ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ adaptive_learning_service.py     # –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ, –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Ç–µ–º—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ moderation_service.py            # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (150+ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤, 4 —è–∑—ã–∫–∞)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gamification_service.py          # –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è, —É—Ä–æ–≤–Ω–∏, XP
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ premium_features_service.py      # Premium –ª–∏–º–∏—Ç—ã –∏ –¥–æ—Å—Ç—É–ø
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment_service.py               # YooKassa / Telegram Stars
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ referral_service.py              # –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ (ref_<id>, whitelist)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ history_service.py               # –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ (–≤–∫–ª—é—á–∞—è image_url)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ adult_topics_service.py          # –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –≤–∑—Ä–æ—Å–ª—ã—Ö —Ç–µ–º –¥–µ—Ç—è–º (–¥–µ–Ω—å–≥–∏, –ñ–ö–£, –¥–æ–∫—É–º–µ–Ω—Ç—ã)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ yandex_art_service.py            # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ YandexART
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ speech_service.py                # –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–∞ (SpeechKit STT)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vision_service.py                # –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Vision API)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ knowledge_service.py             # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π —Å enhanced_search
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user_service.py                  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ panda_lazy_service.py            # –õ–æ–≥–∏–∫–∞ –æ—Ç–¥—ã—Ö–∞/–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —É—á—ë–±—ã
‚îÇ   ‚îú‚îÄ‚îÄ api/                # HTTP endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ miniapp/        # API –¥–ª—è Telegram Mini App
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat_stream.py   # Streaming AI —á–∞—Ç (SSE) ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stream_handlers/ # –ú–æ–¥—É–ª–∏ streaming-–æ–±—Ä–∞–±–æ—Ç–∫–∏ (–ø–∞–∫–µ—Ç)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai_chat_stream.py  # –û—Å–Ω–æ–≤–Ω–æ–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä SSE
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _pre_checks.py     # –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞, Premium-–ø—Ä–æ–≤–µ—Ä–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _media.py          # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ/—Ñ–æ—Ç–æ
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _routing.py        # –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è (–º–æ–¥–µ—Ä–∞—Ü–∏—è, —Ç–µ–º—ã, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _visualization.py  # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _fallback.py       # Fallback-pipeline –±–µ–∑ streaming
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ _history.py        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏, –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ _utils.py          # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ homework.py      # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π (check, history, statistics)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat.py          # Non-streaming AI —á–∞—Ç
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ progress.py      # –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ other.py         # –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞, –ø—Ä–µ–¥–º–µ—Ç—ã, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ helpers.py       # –û–±—â–∏–µ —Ö–µ–ª–ø–µ—Ä—ã Mini App API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ games_endpoints.py   # API –¥–ª—è –∏–≥—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ premium_endpoints.py # –ü—Ä–µ–º–∏—É–º –∏ –ø–ª–∞—Ç–µ–∂–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ panda_endpoints.py   # Panda API (–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth_endpoints.py    # Telegram Login / auth API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validators.py        # –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤, –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ä–µ—Å—É—Ä—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ config/             # –ù–∞—Å—Ç—Ä–æ–π–∫–∏, –ø—Ä–æ–º–ø—Ç—ã, –ø–∞—Ç—Ç–µ—Ä–Ω—ã –º–æ–¥–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ security/           # Middleware, –≤–∞–ª–∏–¥–∞—Ü–∏—è, rate limiting, –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ monitoring/         # –ú–µ—Ç—Ä–∏–∫–∏ (Prometheus), Sentry
‚îÇ   ‚îú‚îÄ‚îÄ keyboards/          # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –±–æ—Ç–∞ (–≤ —Ç.—á. news_bot)
‚îÇ   ‚îú‚îÄ‚îÄ localization/       # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (locales)
‚îÇ   ‚îú‚îÄ‚îÄ middleware/         # Middleware aiogram
‚îÇ   ‚îú‚îÄ‚îÄ news_bot/           # –û—Ç–¥–µ–ª—å–Ω—ã–π news-–±–æ—Ç (handlers, —Å–µ—Ä–≤–∏—Å—ã)
‚îÇ   ‚îú‚îÄ‚îÄ interfaces.py       # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å–µ—Ä–≤–∏—Å–æ–≤ (SOLID)
‚îÇ   ‚îú‚îÄ‚îÄ decorators.py       # –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ models/             # SQLAlchemy –º–æ–¥–µ–ª–∏ –ë–î (–ø–∞–∫–µ—Ç: user, chat, games, payments, referral –∏ –¥—Ä.)
‚îÇ   ‚îî‚îÄ‚îÄ database/           # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL (–ø–∞–∫–µ—Ç)
‚îÇ       ‚îú‚îÄ‚îÄ engine.py        # Engine, SessionLocal, get_db()
‚îÇ       ‚îú‚îÄ‚îÄ alembic_utils.py # Alembic –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ       ‚îú‚îÄ‚îÄ sql_migrations.py # SQL –º–∏–≥—Ä–∞—Ü–∏–∏ (premium, payments)
‚îÇ       ‚îî‚îÄ‚îÄ service.py       # DatabaseService
‚îú‚îÄ‚îÄ frontend/               # React –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/     # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ features/       # AIChat, Premium, Games, Achievements, Donation, Emergency
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/       # API –∫–ª–∏–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/          # useChatStream –∏ –¥—Ä.
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ store/          # Zustand
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/         # –ö–æ–Ω—Ñ–∏–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib/            # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types/          # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îî‚îÄ‚îÄ public/             # –°—Ç–∞—Ç–∏–∫–∞: logo, favicon, panda-chat-reactions, panda-tamagotchi
‚îú‚îÄ‚îÄ tests/                  # –¢–µ—Å—Ç—ã (1000+)
‚îÇ   ‚îú‚îÄ‚îÄ unit/               # Unit —Ç–µ—Å—Ç—ã (~60 —Ñ–∞–π–ª–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ integration/        # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (~38 —Ñ–∞–π–ª–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ e2e/                # End-to-end —Ç–µ—Å—Ç—ã –ø–æ–ª–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
‚îÇ   ‚îú‚îÄ‚îÄ security/           # –¢–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (OWASP, SQL injection, DDoS)
‚îÇ   ‚îú‚îÄ‚îÄ resilience/         # –¢–µ—Å—Ç—ã —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ performance/        # –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –Ω–∞–≥—Ä—É–∑–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ fixtures/           # –û–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ alembic/                # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (Alembic)
‚îú‚îÄ‚îÄ scripts/                # –£—Ç–∏–ª–∏—Ç—ã (—Å–º. scripts/README.md)
‚îÇ   ‚îú‚îÄ‚îÄ update_knowledge_base.py  # –°–∫—Ä–∞–ø–∏–Ω–≥ nsportal.ru, school203.spb.ru + –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ knowledge_embeddings
‚îÇ   ‚îî‚îÄ‚îÄ ...                 # referral_report, check_*, view_*, –∏ –¥—Ä.
‚îú‚îÄ‚îÄ config/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Å–º. config/README.md)
‚îú‚îÄ‚îÄ server_routes/          # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–æ–≤ (health, api, static, middleware)
‚îî‚îÄ‚îÄ web_server.py           # Entry point (aiohttp + aiogram webhook + frontend)
```

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

- **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** ‚Äî –∫—Ä—É–ø–Ω—ã–µ —Ñ–∞–π–ª—ã —Ä–∞–∑–±–∏—Ç—ã –Ω–∞ –ø–∞–∫–µ—Ç—ã –∏ –ø–æ–¥–º–æ–¥—É–ª–∏ (< 500 —Å—Ç—Ä–æ–∫)
- **SOLID SRP** ‚Äî `database/`, `cache/`, `games_service/`, `visualization/detectors/`, `stream_handlers/` –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –ø–∞–∫–µ—Ç—ã; –¥–∞–Ω–Ω—ã–µ –æ—Ç–¥–µ–ª–µ–Ω—ã –æ—Ç –ª–æ–≥–∏–∫–∏ (`adult_topics_data.py`); —Ö–µ–ª–ø–µ—Ä—ã –∏–∑ `ai_chat/text.py` ‚Äî –≤ `helpers.py`
- **Mixin-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** ‚Äî `GamesService` —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ + –æ—Ç–¥–µ–ª—å–Ω—ã—Ö mixin'–æ–≤ –ø–æ –∏–≥—Ä–∞–º; `stream_handlers/` —Ä–∞–∑–±–∏—Ç –Ω–∞ 7 –º–æ–¥—É–ª–µ–π-—Ö–µ–ª–ø–µ—Ä–æ–≤
- **SOLID OCP/DIP** ‚Äî –Ω–æ–≤—ã–µ –¥–µ—Ç–µ–∫—Ç–æ—Ä—ã –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞; –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ `interfaces.py`
- **PEP 20** ‚Äî —è–≤–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã, –ø–ª–æ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤, –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ re-export shims
- **–ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** ‚Äî –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è chunked reading
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è, –º–æ–¥–µ—Ä–∞—Ü–∏—è, rate limiting –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
- **–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** ‚Äî Circuit Breaker –¥–ª—è Yandex GPT/STT/Vision, retry –ø—Ä–∏ —Ç–∞–π–º–∞—É—Ç–∞—Ö (tenacity)
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ: –æ–¥–∏–Ω webhook (–æ–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–∏—ë–º–Ω–∏–∫ –∏–ª–∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫); FSM –∏ –∫–µ—à –≤ Redis

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

```mermaid
graph TB
    User[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] --> TG[Telegram Bot]
    User --> Web[Mini App]
    TG --> Server[web_server.py]
    Web --> Server
    Server --> Handlers[Handlers]
    Handlers --> Services[Services]
    Services --> AI[Yandex Cloud AI]
    Services --> DB[(PostgreSQL)]
    Services --> Redis[(Redis)]
    Services --> YooKassa[YooKassa]

    subgraph Backend
        Server
        Handlers
        Services
    end

    subgraph External
        AI
        DB
        Redis
        YooKassa
    end
```

### Entry Point

- `web_server.py` ‚Äî aiohttp —Å–µ—Ä–≤–µ—Ä —Å webhook –¥–ª—è Telegram, —Ä–∞–∑–¥–∞—á–∞ frontend
  - `PandaPalBotServer` ‚Äî –∫–ª–∞—Å—Å —Å–µ—Ä–≤–µ—Ä–∞, —Å–±–æ—Ä–∫–∞ app –∏ lifecycle (init_bot, webhook, shutdown)
  - `_setup_app_base()` ‚Äî –±–∞–∑–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - `_setup_webhook_handler()` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ webhook –æ—Ç Telegram
- `server_routes/` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–æ–≤ (–≤—ã–Ω–µ—Å–µ–Ω–æ –∏–∑ web_server): health, middleware, api, static

### Services (SOLID Architecture)

- `interfaces.py` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å–µ—Ä–≤–∏—Å–æ–≤ (IUserService, IModerationService, IAIService)
- `ai_service_solid.py` ‚Äî –≥–ª–∞–≤–Ω—ã–π AI —Å–µ—Ä–≤–∏—Å —á–µ—Ä–µ–∑ Yandex Cloud (Facade –ø–∞—Ç—Ç–µ—Ä–Ω)
- `yandex_cloud_service.py` ‚Äî –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Ä–∞–±–æ—Ç–∞ —Å Yandex Cloud API
- `yandex_ai_response_generator.py` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ —Å RAG –∏ Dependency Injection
- **`rag/`** ‚Äî Enhanced RAG —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–º–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞:
  - `vector_search.py` ‚Äî —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ `knowledge_embeddings` (pgvector, cosine similarity, Yandex Embeddings API)
  - `query_expander.py` ‚Äî multi-query RAG, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏ (—Å–ø–∏—Å–æ–∫, –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ –∫–æ—Ä–Ω–∏ –∏ –¥—Ä.)
  - `reranker.py` ‚Äî –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ relevance, age, recency, source quality
  - `semantic_cache.py` ‚Äî –≤–µ–∫—Ç–æ—Ä–Ω—ã–π —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∫–µ—à (pgvector + Yandex Embeddings API)
  - `compressor.py` ‚Äî –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∫–æ–º–ø—Ä–µ—Å—Å–∏—è (—Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –æ–±—ä—ë–º–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ 75‚Äì90%, –∑–∞—â–∏—Ç–∞ —Å–ø–∏—Å–∫–æ–≤ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö ¬´—Å–ø–∏—Å–æ–∫¬ª/¬´—Ç–∞–±–ª–∏—Ü–∞¬ª)
- `knowledge_service.py` ‚Äî –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π —Å enhanced_search –∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–µ–π
- `speech_service.py` ‚Äî —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–∞ —á–µ—Ä–µ–∑ Yandex SpeechKit STT
- `vision_service.py` ‚Äî –∞–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ Yandex Vision API, –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π
- `homework_service.py` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π –ø–æ —Ñ–æ—Ç–æ —Å –∞–Ω–∞–ª–∏–∑–æ–º –æ—à–∏–±–æ–∫
- `adaptive_learning_service.py` ‚Äî –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ç–µ–º, —Ä–∞—Å—á–µ—Ç —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- `moderation_service.py` ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (150+ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤, 4 —è–∑—ã–∫–∞)
- `user_service.py` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- `payment_service.py` ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å YooKassa (–ø—Ä–æ–¥–∞–∫—à–Ω, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç)
- `referral_service.py` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ ref-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞, whitelist —Ä–µ—Ñ–µ—Ä–µ—Ä–æ–≤
- `premium_features_service.py` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ Premium —Å—Ç–∞—Ç—É—Å–∞ –∏ –ª–∏–º–∏—Ç–æ–≤
- `games_service/` ‚Äî –ª–æ–≥–∏–∫–∞ –∏–≥—Ä PandaPalGo (–ø–∞–∫–µ—Ç: TicTacToe, Checkers, 2048, Erudite)
- `gamification_service.py` ‚Äî –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, —É—Ä–æ–≤–Ω–∏, XP
- **`visualization/`** ‚Äî –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º:
  - `detector.py` ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–µ—Ç–µ–∫—Ü–∏–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π (~300 —Å—Ç—Ä–æ–∫)
  - `detectors/` ‚Äî –º–æ–¥—É–ª–∏ –¥–µ—Ç–µ–∫—Ü–∏–∏ (SOLID SRP): `request_words`, `schemes`, `diagrams`, `maps`, `physics`, `math_graphs`, `tables_and_diagrams`
  - `math/` ‚Äî –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (–≥—Ä–∞—Ñ–∏–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π, —Ç–∞–±–ª–∏—Ü—ã —É–º–Ω–æ–∂–µ–Ω–∏—è, –≥–µ–æ–º–µ—Ç—Ä–∏—è)
  - `sciences/` ‚Äî —Ñ–∏–∑–∏–∫–∞, —Ö–∏–º–∏—è (–¥–∏–∞–≥—Ä–∞–º–º—ã, —Ñ–æ—Ä–º—É–ª—ã)
  - `social/` ‚Äî –≥–µ–æ–≥—Ä–∞—Ñ–∏—è, –∏—Å—Ç–æ—Ä–∏—è (–∫–∞—Ä—Ç—ã, —Å—Ö–µ–º—ã, —Ç–∞–π–º–ª–∞–π–Ω—ã)
  - `languages/` ‚Äî —Ç–∞–±–ª–∏—Ü—ã –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏, —Å—Ö–µ–º—ã –≤—Ä–µ–º–µ–Ω
  - `other/` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞, –æ–∫—Ä—É–∂–∞—é—â–∏–π –º–∏—Ä

### Handlers (–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)

- `handlers/ai_chat/` ‚Äî –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ AI —á–∞—Ç–∞:
  - `text.py` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä-pipeline)
  - `voice.py` ‚Äî –≥–æ–ª–æ—Å–æ–≤—ã–µ –∏ –∞—É–¥–∏–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å FSM-–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º (¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å¬ª / ¬´–ò—Å–ø—Ä–∞–≤–∏—Ç—å¬ª) –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ AI
  - `image.py` ‚Äî –∞–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  - `document.py` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  - `helpers.py` ‚Äî –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (Premium-–ª–∏–º–∏—Ç—ã, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏, –ø–µ—Ä–µ–≤–æ–¥, –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤, —Ñ–∏–¥–±–µ–∫)
  - `__init__.py` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è router –∏ handlers

### API Endpoints

- `bot/api/miniapp/chat_stream.py` ‚Üí `stream_handlers/ai_chat_stream.py` ‚Äî Mini App AI chat —Å streaming (SSE), –≥–æ–ª–æ—Å, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (—Ä–∞–∑–±–∏—Ç –Ω–∞ 7 –º–æ–¥—É–ª–µ–π)
- `bot/api/miniapp/chat.py` ‚Äî Non-streaming AI —á–∞—Ç
- `bot/api/miniapp/homework.py` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π (check, history, statistics)
- `bot/api/miniapp/progress.py` ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è
- `bot/api/miniapp/other.py` ‚Äî –∏—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞, –ø—Ä–µ–¥–º–µ—Ç—ã, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ Mini App
- `premium_endpoints.py` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π YooKassa, webhooks, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç
- `games_endpoints.py` ‚Äî API –¥–ª—è –∏–≥—Ä (—Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π, —Ö–æ–¥—ã, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ)
- `panda_endpoints.py` ‚Äî Panda API (–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
- `auth_endpoints.py` ‚Äî Telegram Login Widget –¥–ª—è —Å–∞–π—Ç–∞

### Security

- **OWASP A01: Broken Access Control** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ä–µ—Å—É—Ä—Å–∞ —á–µ—Ä–µ–∑ `X-Telegram-Init-Data` –∑–∞–≥–æ–ª–æ–≤–æ–∫ (HMAC-SHA256 –≤–∞–ª–∏–¥–∞—Ü–∏—è). –í—Å–µ endpoints —Å `telegram_id` –≤ URL –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- **OWASP A10: SSRF Protection** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤–Ω–µ—à–Ω–∏—Ö URL —á–µ—Ä–µ–∑ whitelist –¥–æ–º–µ–Ω–æ–≤, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö IP –∏ localhost
- **Content Security Policy (CSP)** ‚Äî —Å—Ç—Ä–æ–≥–∏–µ CSP headers –≤ frontend –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç XSS
- –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (150+ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤, 4 —è–∑—ã–∫–∞)
- Rate limiting: 300 req/min API, 100 req/min AI, 20 req/min auth
- Daily limits: 30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–µ—Å—è—Ü (free), 500 –≤ –¥–µ–Ω—å (Premium, 299 ‚ÇΩ/–º–µ—Å)
- CORS, CSRF –∑–∞—â–∏—Ç–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic V2
- SQLAlchemy ORM –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç SQL injection
- –ê—É–¥–∏—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ loguru

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç **–∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏** –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤:**
- üß™ **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 1000+**
- ‚úÖ **Unit —Ç–µ—Å—Ç—ã: 60+ —Ñ–∞–π–ª–æ–≤** (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, SSRF, audit logging, –ë–î, –∫–µ—à, –º–æ–¥–µ—Ä–∞—Ü–∏—è, –∏–≥—Ä—ã, —Å–µ—Ä–≤–∏—Å—ã)
- ‚úÖ **Integration —Ç–µ—Å—Ç—ã: 38+ —Ñ–∞–π–ª–æ–≤** (API, –ø–ª–∞—Ç–µ–∂–∏, –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è, —Ä–µ–∞–ª—å–Ω—ã–π Yandex Cloud API)
- ‚úÖ **E2E —Ç–µ—Å—Ç—ã: 5 —Ñ–∞–π–ª–æ–≤** (–ø–æ–ª–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏)
- ‚úÖ **Security —Ç–µ—Å—Ç—ã: 6 —Ñ–∞–π–ª–æ–≤** (OWASP, SQL injection, DDoS, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
- ‚úÖ **Resilience —Ç–µ—Å—Ç—ã: 5 —Ñ–∞–π–ª–æ–≤** (—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤)
- ‚úÖ **Performance —Ç–µ—Å—Ç—ã: 7 —Ñ–∞–π–ª–æ–≤** (–Ω–∞–≥—Ä—É–∑–∫–∞ endpoints, –ë–î, –ø–ª–∞—Ç–µ–∂–∏)

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ—Å—Ç–æ–≤

#### Unit Tests (`tests/unit/`)
- `test_security.py` ‚Äî 16 —Ç–µ—Å—Ç–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  - IntegrityChecker (checksum, JSON validation, sanitization)
  - SSRFProtection (URL whitelist, IP blocking, method validation)
  - AuditLogger (data masking, log injection protection, critical events)
- `test_panda_lazy_continue_learn.py` ‚Äî –ª–æ–≥–∏–∫–∞ ¬´–ø—Ä–æ–¥–æ–ª–∂–∞–µ–º —É—á—ë–±—É¬ª: —Ñ—Ä–∞–∑—ã ¬´—Ä–µ—à–∞—Ç—å –∑–∞–¥–∞—á–∏¬ª, ¬´–Ω–µ —Ö–æ—á—É –∏–≥—Ä–∞—Ç—å¬ª –Ω–µ –≤–µ–¥—É—Ç –≤ —Ä–∞–∑–¥–µ–ª –ò–≥—Ä—ã
- `test_adult_topics_service.py` ‚Äî –¥–µ—Ç–µ–∫—Ü–∏—è –≤–∑—Ä–æ—Å–ª—ã—Ö —Ç–µ–º (–ñ–ö–£, –±–∞–Ω–∫–∏), –≥–æ—Ç–æ–≤—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è

#### Integration Tests (`tests/integration/`)
- `test_security_crypto_integration.py` ‚Äî 13 —Ç–µ—Å—Ç–æ–≤ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏–∏
  - Fernet AES-128 encryption/decryption
  - HMAC hashing with salt
  - Child data protection
- `test_webhook_and_security_real.py` ‚Äî webhook –∏ security middleware
- `test_comprehensive_panda_e2e.py` ‚Äî –ø–æ–ª–Ω—ã–µ E2E —Ç–µ—Å—Ç—ã –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –ø–∞–Ω–¥—ã

#### Security Tests (`tests/security/`)
- `test_api_authorization.py` ‚Äî —Ç–µ—Å—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ API (A01 –∑–∞—â–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç!)
  - –í—Å–µ 4 —Ç–µ—Å—Ç–∞ —É–ø–∞–ª–∏ —Å 403 Forbidden ‚Äî **–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ —á—Ç–æ –∑–∞—â–∏—Ç–∞ –†–ï–ê–õ–¨–ù–ê–Ø**
  - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –±–µ–∑ `X-Telegram-Init-Data`
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ä–µ—Å—É—Ä—Å–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**‚úÖ –í–°–Ø –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –†–ê–ë–û–¢–ê–ï–¢ –†–ï–ê–õ–¨–ù–û **

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ (security —Ç–µ—Å—Ç—ã):**
- ‚úÖ –¢–µ—Å—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 403 ‚Äî **–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã A01**

**–õ–æ–≥–∏ –∏–∑ —Ç–µ—Å—Ç–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:**
```
WARNING | bot.api.validators:verify_resource_owner:192 -
üö´ A01: –ó–∞–ø—Ä–æ—Å –±–µ–∑ X-Telegram-Init-Data –∫ —Ä–µ—Å—É—Ä—Å—É user=222222222
Response: 403 Forbidden
```

**–†–µ–∞–ª—å–Ω–∞—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞:**
```python
# HMAC-SHA256 —Å constant-time compare (–∑–∞—â–∏—Ç–∞ –æ—Ç timing attacks)
secret_key = hmac.new(b"WebAppData", bot_token, hashlib.sha256).digest()
calculated_hash = hmac.new(secret_key, data_check_string, hashlib.sha256).hexdigest()
hmac.compare_digest(received_hash, calculated_hash)  # –ó–∞—â–∏—Ç–∞ –æ—Ç timing attacks

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è (24 —á–∞—Å–∞)
if current_time - auth_date > 86400:
    return None
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
pytest tests/unit/test_security.py tests/integration/test_security_crypto_integration.py -v

# E2E —Ç–µ—Å—Ç—ã (—Ç—Ä–µ–±—É–µ—Ç—Å—è YANDEX_CLOUD_API_KEY)
pytest tests/e2e/test_comprehensive_panda_e2e.py -v

# –í—Å–µ —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest tests/ --cov=bot --cov-report=html
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã –∑–∞—â–∏—Ç—ã

#### OWASP Top 10

- **A01: Broken Access Control** ‚úÖ
  - –í—Å–µ API endpoints —Å `telegram_id` –≤ URL –∑–∞—â–∏—â–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ä–µ—Å—É—Ä—Å–∞
  - Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `X-Telegram-Init-Data` –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤–æ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
  - Backend –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç HMAC-SHA256 –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ Telegram Bot Token
  - –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ endpoints: `/user/{id}`, `/progress/{id}`, `/achievements/{id}`, `/dashboard/{id}`, `/chat/history/{id}`, `/games/{id}/*`, `/homework/{id}/*`, `/premium/{id}/*`
  - –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –¥–æ—Å—Ç—É–ø–∞ –∫ —á—É–∂–∏–º –¥–∞–Ω–Ω—ã–º –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è 403 Forbidden

- **A10: SSRF Protection** ‚úÖ
  - –í—Å–µ –≤–Ω–µ—à–Ω–∏–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ `SSRFProtection.validate_external_request()`
  - Whitelist —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ (nsportal.ru, school203.ru)
  - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ localhost, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º IP (10.x, 172.16-31.x, 192.168.x)
  - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º—ã URL (—Ç–æ–ª—å–∫–æ http/https)

#### –î—Ä—É–≥–∏–µ –º–µ—Ä—ã

- **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: Pydantic V2 –¥–ª—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **SQL Injection**: SQLAlchemy ORM, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- **XSS Protection**: Content Security Policy (CSP) headers –≤ frontend
- **–ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞**: 150+ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤, —Ñ–∏–ª—å—Ç—Ä—ã –Ω–∞ 4 —è–∑—ã–∫–∞—Ö (—Ä—É—Å—Å–∫–∏–π, –∞–Ω–≥–ª–∏–π—Å–∫–∏–π, –Ω–µ–º–µ—Ü–∫–∏–π, —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π)
- **Rate Limiting**: 300 req/min –¥–ª—è API, 100 req/min –¥–ª—è AI, 20 req/min –¥–ª—è auth
- **HTTPS**: Cloudflare Full Strict, –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ HTTPS
- **–°–µ–∫—Ä–µ—Ç—ã**: —Ç–æ–ª—å–∫–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è, –Ω–∏–∫–æ–≥–¥–∞ –≤ –∫–æ–¥–µ
- **–ê—É–¥–∏—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –≤—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ loguru

### –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ endpoints

–í—Å–µ —Å–ª–µ–¥—É—é—â–∏–µ endpoints —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-Telegram-Init-Data` –∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ä–µ—Å—É—Ä—Å–∞:

- `GET/PATCH /api/miniapp/user/{telegram_id}` ‚Äî –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /api/miniapp/progress/{telegram_id}` ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è
- `GET /api/miniapp/achievements/{telegram_id}` ‚Äî –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- `GET /api/miniapp/dashboard/{telegram_id}` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∞—à–±–æ—Ä–¥–∞
- `GET/DELETE /api/miniapp/chat/history/{telegram_id}` ‚Äî –∏—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞
- `POST /api/miniapp/chat/greeting/{telegram_id}` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- `POST /api/miniapp/ai/chat` ‚Äî AI —á–∞—Ç –±–µ–∑ streaming (telegram_id –≤ body)
- `POST /api/miniapp/ai/chat-stream` ‚Äî AI —á–∞—Ç —Å–æ streaming (SSE, telegram_id –≤ body)
- `POST /api/miniapp/games/{telegram_id}/create` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä—ã
- `GET /api/miniapp/games/{telegram_id}/stats` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä
- `GET /api/miniapp/homework/history/{telegram_id}` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –î–ó
- `GET /api/miniapp/homework/statistics/{telegram_id}` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –î–ó
- `GET /api/miniapp/premium/status/{telegram_id}` ‚Äî —Å—Ç–∞—Ç—É—Å Premium
- `GET /api/miniapp/premium/learning-plan/{telegram_id}` ‚Äî –ø–ª–∞–Ω –æ–±—É—á–µ–Ω–∏—è
- `GET /api/miniapp/premium/bonus-lessons/{telegram_id}` ‚Äî –±–æ–Ω—É—Å–Ω—ã–µ —É—Ä–æ–∫–∏
- `GET /api/miniapp/premium/features/{telegram_id}` ‚Äî Premium —Ñ—É–Ω–∫—Ü–∏–∏
- `GET /api/miniapp/premium/support-queue/{telegram_id}` ‚Äî –æ—á–µ—Ä–µ–¥—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏

–°–æ–æ–±—â–∏—Ç—å –æ–± —É—è–∑–≤–∏–º–æ—Å—Ç–∏: —Å–º. [SECURITY.md](.github/SECURITY.md)

## –ù–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π (RAG)

–î–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ –Ω—É–∂–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤ `knowledge_embeddings`:

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ (—Å Railway DATABASE_URL ‚Äî —á–µ—Ä–µ–∑ railway run)
railway link   # –≤—ã–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç PandaPal
railway run python scripts/update_knowledge_base.py
```

–°–∫—Ä–∏–ø—Ç —Å–∫–∞—á–∏–≤–∞–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª—ã —Å nsportal.ru, school203.spb.ru, –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –≤ pgvector.

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Railway / –ª–æ–∫–∞–ª—å–Ω–æ)

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–ø–∏—Å–∞–Ω—ã –≤ `config/env.template`. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:

- `DATABASE_URL`, `TELEGRAM_BOT_TOKEN` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã
- `YANDEX_CLOUD_API_KEY`, `YANDEX_CLOUD_FOLDER_ID` ‚Äî –¥–ª—è YandexGPT, SpeechKit, Vision, Embeddings API
- `SECRET_KEY` ‚Äî –¥–ª—è —Å–µ—Å—Å–∏–π –∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
- –î–ª—è Premium: `YOOKASSA_SHOP_ID`, `YOOKASSA_SECRET_KEY` –∏ –¥—Ä. (—Å–º. —à–∞–±–ª–æ–Ω)

## –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (2025‚Äì2026)

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ (—Ñ–µ–≤—Ä–∞–ª—å 2026)

- **RAG semantic_cache**: –∑–∞–ø—Ä–æ—Å—ã –∫ `embedding_cache` –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã —Å `:vec::vector` –Ω–∞ `CAST(:vec AS vector)` –≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏ PostgreSQL –ø—Ä–∏ –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
- **–¶–∏—Ñ—Ä—ã –≤ —Å—Ç–æ–ª–±–∏–∫**: –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ `_merge_digit_only_lines` —Å–∫–ª–µ–∏–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏ –∏–∑ –æ–¥–Ω–∏—Ö —Ü–∏—Ñ—Ä (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç –º–æ–¥–µ–ª–∏: –≥–æ–¥ 1837 –∫–∞–∫ 1\\n8\\n3\\n7) –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É.
- **Streaming**: —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ `event: final`; —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ AI, —É–±–∏—Ä–∞—è –º–∏–≥–∞–Ω–∏–µ.
- **Frontend**: —à—Ä–∏—Ñ—Ç Literata (font-chat) –¥–ª—è –≤—Å–µ–≥–æ —Ç–µ–∫—Å—Ç–∞ –æ—Ç–≤–µ—Ç–æ–≤ –ü–∞–Ω–¥—ã, —Ä–∞–∑–º–µ—Ä text-sm/sm:text-base.

### RAG, pgvector, Railway, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (—Ñ–µ–≤—Ä–∞–ª—å 2026)

- **RAG —Å pgvector**: —Ç–∞–±–ª–∏—Ü–∞ `knowledge_embeddings`, VectorSearchService, –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ (–≤–µ–∫—Ç–æ—Ä–Ω—ã–π + keyword), —Å–∫—Ä–∏–ø—Ç `update_knowledge_base.py` –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (nsportal.ru, school203.spb.ru, Wikipedia)
- **Railway deployment**: pgvector –Ω–∞ Railway, DATABASE_URL —á–µ—Ä–µ–∑ `pgvector.railway.internal` (private network), SSL disable –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–µ—Ç–∏
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è**: —Ç–∞–±–ª–∏—Ü–∞ –∑–Ω–∞—á–µ–Ω–∏–π –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö –∫–æ—Ä–Ω–µ–π ‚àö1‚Äì‚àö50 (algebra.py), –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è ¬´—Å–ø–∏—Å–æ–∫/—Ç–∞–±–ª–∏—Ü–∞ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö –∫–æ—Ä–Ω–µ–π¬ª –≤ detectors
- **RAG**: —Ä–∞—Å—à–∏—Ä–µ–Ω—ã –ø–∞—Ç—Ç–µ—Ä–Ω—ã `_extract_topic_from_question` –¥–ª—è ¬´—Å–ø–∏—Å–æ–∫¬ª, ¬´—Ç–∞–±–ª–∏—Ü–∞ –∑–Ω–∞—á–µ–Ω–∏–π¬ª, ¬´–≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è¬ª; –ª–∏–º–∏—Ç `format_knowledge_for_ai` 300‚Üí1000 —Å–∏–º–≤–æ–ª–æ–≤; –∑–∞—â–∏—Ç–∞ —Å–ø–∏—Å–∫–æ–≤ –≤ ContextCompressor
- **–ü—Ä–æ–º–ø—Ç—ã**: –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ ¬´—Å–ø–∏—Å–æ–∫¬ª/¬´—Ç–∞–±–ª–∏—Ü–∞ –∑–Ω–∞—á–µ–Ω–∏–π¬ª ‚Äî 10‚Äì15 –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤
- **–§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏**: `offer_feedback_form` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `total_requests` –≤–º–µ—Å—Ç–æ `message_count`
- **–ì–æ–ª–æ—Å (FSM)**: –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ ‚Äî inline-–∫–Ω–æ–ø–∫–∏ ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å¬ª / ¬´–ò—Å–ø—Ä–∞–≤–∏—Ç—å¬ª –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ AI
- **Embeddings API**: `get_embedding` –≤ YandexCloudService, EmbeddingService, —Ç–∞–±–ª–∏—Ü–∞ `embedding_cache` (pgvector)
- **SemanticCache**: –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ ‚Äî pgvector + Yandex Embeddings API (cosine similarity), –±–µ–∑ Jaccard
- **QueryExpander**: —Å–∏–Ω–æ–Ω–∏–º—ã –¥–ª—è ¬´—Å–ø–∏—Å–æ–∫¬ª, ¬´–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ –∫–æ—Ä–Ω–∏¬ª
- **–¢–µ—Å—Ç—ã**: `test_embeddings_real.py`, `test_semantic_cache_real.py`, `test_panda_responses_real.py` (E2E)
- **Chain-of-Thought (CoT)**: –ø—Ä–∞–≤–∏–ª–∞ –∏ few-shot –ø—Ä–∏–º–µ—Ä—ã –≤ prompts.py; Zero-shot —Ç—Ä–∏–≥–≥–µ—Ä ¬´–î–∞–≤–∞–π—Ç–µ —Ä–µ—à–∞—Ç—å –ø–æ—à–∞–≥–æ–≤–æ¬ª –¥–ª—è –∑–∞–¥–∞—á —Å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è–º–∏
- **–†—É—Å—Å–∫–∏–π —è–∑—ã–∫**: —Å—Ç—Ä–æ–≥–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏, –∑–∞–ø—Ä–µ—Ç –∞–Ω–≥–ª–∏—Ü–∏–∑–º–æ–≤ (–∞–ø–¥–µ–π—Ç‚Üí–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —Ñ–∏–¥–±–µ–∫‚Üí–æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å)
- **E2E –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤**: ResponseQualityValidator, –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã, –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ø—É—Å—Ç—ã–µ/–Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã, CoT-–∑–∞–¥–∞—á–∏ (—è–±–ª–æ–∫–∏, –º—è—á–∏, —â–µ–Ω–∫–∏)

### SOLID SRP —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (—Ñ–µ–≤—Ä–∞–ª—å 2026)

- **`bot/services/games_service.py`** (1025 —Å—Ç—Ä–æ–∫) ‚Üí –ø–∞–∫–µ—Ç `bot/services/games_service/`: `session.py`, `tic_tac_toe.py`, `checkers.py`, `game_2048.py`, `erudite.py`; mixin-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å `GamesServiceBase` + game-specific mixins; facade —á–µ—Ä–µ–∑ `__init__.py`
- **`bot/api/miniapp/stream_handlers/ai_chat_stream.py`** (1743 —Å—Ç—Ä–æ–∫) ‚Üí –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä + 7 –º–æ–¥—É–ª–µ–π: `_pre_checks.py`, `_media.py`, `_routing.py`, `_visualization.py`, `_fallback.py`, `_history.py`, `_utils.py`
- **`bot/database.py`** (633 —Å—Ç—Ä–æ–∫) ‚Üí –ø–∞–∫–µ—Ç `bot/database/`: `engine.py`, `alembic_utils.py`, `sql_migrations.py`, `service.py`; backward-compatible re-exports —á–µ—Ä–µ–∑ `__init__.py`
- **`bot/services/cache_service.py`** (652 —Å—Ç—Ä–æ–∫) ‚Üí –ø–∞–∫–µ—Ç `bot/services/cache/`: `memory.py`, `service.py`, `specialized.py`; shim –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- **`bot/services/visualization/detector.py`** (1809 —Å—Ç—Ä–æ–∫) ‚Üí –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä 300 —Å—Ç—Ä–æ–∫ + 7 –º–æ–¥—É–ª–µ–π –≤ `detectors/`: `request_words`, `schemes`, `diagrams`, `maps`, `physics`, `math_graphs`, `tables_and_diagrams`
- **`bot/handlers/ai_chat/text.py`** (775 —Å—Ç—Ä–æ–∫) ‚Üí 509 —Å—Ç—Ä–æ–∫; 6 —Ö–µ–ª–ø–µ—Ä–æ–≤ –∏–∑–≤–ª–µ—á–µ–Ω—ã –≤ `helpers.py` (Premium-–ª–∏–º–∏—Ç—ã, –ø–µ—Ä–µ–≤–æ–¥, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è, –æ—Ç–ø—Ä–∞–≤–∫–∞, —Ñ–∏–¥–±–µ–∫)
- **`bot/services/adult_topics_service.py`** (919 —Å—Ç—Ä–æ–∫) ‚Üí 190 —Å—Ç—Ä–æ–∫; 26 —Ç–æ–ø–∏–∫–æ–≤ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ `bot/config/adult_topics_data.py`
- **`web_server.py`** ‚Äî entry point, webhook, healthcheck
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ SOLID/PEP 20 –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ (2026)

- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ admin-–∫–æ–º–∞–Ω–¥–∞–º –ø–æ `admin_telegram_ids`; –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—É–º–º—ã –ø–ª–∞—Ç–µ–∂–µ–π (1‚Äì10000 Stars); –ø—Ä–æ–≤–µ—Ä–∫–∞ `auth_date` –∏–∑ –±—É–¥—É—â–µ–≥–æ –≤ Telegram initData; –≤–∞–ª–∏–¥–∞—Ü–∏—è IP –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (ipaddress)
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: `FORBIDDEN_PATTERNS` –∏ `EDUCATIONAL_KEYWORDS` –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ `frozenset` (O(1) lookup); —É–¥–∞–ª—ë–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥ –æ—á–µ—Ä–µ–¥–∏ –≤ overload_protection
- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å**: –≤–µ–∑–¥–µ `datetime.now(UTC)` –≤–º–µ—Å—Ç–æ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ `utcnow()`; —É–±—Ä–∞–Ω—ã —Ö–∞—Ä–¥–∫–æ–¥ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ defaults –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–∑–Ω–∞—á–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –∏–∑ env)
- **–ö–æ–¥**: –æ–±—â–∏–π —Ö–µ–ª–ø–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ Premium-–ª–∏–º–∏—Ç–æ–≤ –≤ `ai_chat/helpers.py`; –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≥–æ–ª–æ—Å–∞ –∏ –∞—É–¥–∏–æ –≤ `voice.py`; –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `memoize` –≤ `cache_result` –≤ decorators; –ª–∏–¥–µ—Ä–±–æ—Ä–¥ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ XP/—É—Ä–æ–≤–µ–Ω—å –∏–∑ GamificationService
- **Frontend**: —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π `logger` (debug-–ª–æ–≥–∏ —Ç–æ–ª—å–∫–æ –≤ dev); —É–±—Ä–∞–Ω—ã –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ `console.log` –∏–∑ –ø—Ä–æ–¥–∞–∫—à–Ω-–∫–æ–¥–∞
- **–¢–µ—Å—Ç—ã**: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω flaky —Ç–µ—Å—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π; –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ (–æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª ‚Äî –∫–æ—Ä–Ω–µ–≤–æ–π `pytest.ini`)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (2025)

- –†–∞–∑–±–∏—Ç –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π `ai_chat.py` (1406 —Å—Ç—Ä–æ–∫) –Ω–∞ –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
  - `text.py` ‚Äî —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
  - `voice.py` ‚Äî –≥–æ–ª–æ—Å–æ–≤—ã–µ –∏ –∞—É–¥–∏–æ
  - `image.py` ‚Äî –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  - `document.py` ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç—ã
  - `helpers.py` ‚Äî –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤: –ø–æ—Ç–æ–∫–æ–≤–æ–µ —á—Ç–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ `file.read()`
- –ü—Ä–∏–º–µ–Ω–µ–Ω—ã SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã: —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å
- –£–ª—É—á—à–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞: –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å < 500 —Å—Ç—Ä–æ–∫
- –£–ø—Ä–æ—â–µ–Ω—ã –¥–æ–∫—Å—Ç—Ä–∏–Ω–≥–∏ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ (–∫—Ä–∞—Ç–∫–∏–µ, –±–µ–∑ —ç–º–æ–¥–∑–∏ –∏ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã circular imports –≤ –º–æ–¥–µ–ª—è—Ö
- –†–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ –≤ unit/integration –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

### AI –∏ –ú–æ–¥–µ–ª—å

- **YandexGPT Pro** –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å temperature=0.4
- **Enhanced RAG —Å–∏—Å—Ç–µ–º–∞** ‚Äî –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π —Å –∫–æ–º–ø—Ä–µ—Å—Å–∏–µ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (75-90%)
- **Streaming –æ—Ç–≤–µ—Ç—ã** —á–µ—Ä–µ–∑ Server-Sent Events –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- **–£–ª—É—á—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è AI**:
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞–º–∏ –∏ –Ω—É–º–µ—Ä–∞—Ü–∏–µ–π
  - –£—á–µ—Ç –í–°–ï–• —Å–ª–æ–≤ –≤ –∑–∞–ø—Ä–æ—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –ì–ª—É–±–æ–∫–∏–µ 4-–ø–∞—Ä–∞–≥—Ä–∞—Ñ–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π
  - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ–¥ —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  - –ó–∞–ø—Ä–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π —Ç–∞–±–ª–∏—Ü —É–º–Ω–æ–∂–µ–Ω–∏—è/—Å–ª–æ–∂–µ–Ω–∏—è
- –û—á–∏—Å—Ç–∫–∞ AI –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ (–∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –¥–ª—è —Ç–æ—á–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ markdown (–∂–∏—Ä–Ω—ã–π **, —Å–ø–∏—Å–∫–∏, –∑–∞–≥–æ–ª–æ–≤–∫–∏) –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤; —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–∞—Ä—Å–∏—Ç –∏—Ö –≤ AIChat.tsx
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è –Ω–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π

### –ü–ª–∞—Ç–µ–∂–∏

- –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ YooKassa –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç –¥–ª—è –∞–≤—Ç–æ–ø–ª–∞—Ç–µ–∂–µ–π
- –û—Ç–≤—è–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∫–∞—Ä—Ç —á–µ—Ä–µ–∑ UI
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ webhooks –∏ –ø–æ–¥–ø–∏—Å–µ–π
- Premium: —Ç–æ–ª—å–∫–æ —Ç–∞—Ä–∏—Ñ **299 ‚ÇΩ/–º–µ—Å—è—Ü**
- **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞**: —Å—Å—ã–ª–∫–∏ `ref_<telegram_id>`, whitelist —Ä–µ—Ñ–µ—Ä–µ—Ä–æ–≤, –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ, —Å–∫—Ä–∏–ø—Ç –º–µ—Å—è—á–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞ `referral_report.py`

### –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è

- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–≥—Ä–∞ –≠—Ä—É–¥–∏—Ç –≤ PandaPalGo (–∑–∞–º–µ–Ω–∞ Two Dots)
- –£–ª—É—á—à–µ–Ω–∏—è Checkers: AI —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–æ—Ä–æ–ª–µ–π –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –≤–∑—è—Ç–∏–π, –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ö–æ–¥–æ–≤ (—Ç–µ–º–Ω—ã–µ –∫–ª–µ—Ç–∫–∏, –≥—Ä–∞–Ω–∏—Ü—ã –¥–æ—Å–∫–∏), –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤–æ–π–Ω–æ–≥–æ –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏—è –∫–æ—Ä–æ–ª—è
- –£–ª—É—á—à–µ–Ω–∏—è Erudite: –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç –æ—á–∫–æ–≤ (–æ—Å–Ω–æ–≤–Ω–æ–µ —Å–ª–æ–≤–æ + –ø–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä–Ω—ã–µ), –±–æ–Ω—É—Å—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ –≤—Å–µ–º—É —Å–ª–æ–≤—É, AI —Ö–æ–¥—ã, –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Å–ª–æ–≤, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ—à–∫–∞ —Ñ–∏—à–µ–∫

### Frontend

- –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–æ–≤
- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º
- –ó–∞–º–æ—á–∫–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö –æ–ø–ª–∞—Ç—ã –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –≤–Ω–µ –º–∏–Ω–∏-–∞–ø–ø
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ (WebM ‚Üí OGG –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è)
- –ü–∞—Å—Ç–µ–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ –∏ –º—è–≥–∫–∏–µ —Ç–µ–Ω–∏ –¥–ª—è –±–ª–æ–∫–æ–≤ Premium –∏ Donation
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: lazy loading, code splitting, preload
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤**: viewport 280px+ (—Å–∫–ª–∞–¥–Ω—ã–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã Galaxy Fold), 375px (–º–æ–±–∏–ª—å–Ω—ã–µ), 768px (–ø–ª–∞–Ω—à–µ—Ç—ã), 1920px (–¥–µ—Å–∫—Ç–æ–ø); E2E —Ç–µ—Å—Ç—ã `website.responsive.spec.ts`

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- Keep-alive –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–Ω–∞ –Ω–∞ Railway FREE
- –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Yandex Cloud API
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ daily request limits
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Å—è—á–Ω—ã–π –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (30/–º–µ—Å—è—Ü) —Å –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–º–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –ø–∞–Ω–¥—ã
- –£–¥–∞–ª–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ SQL —Å–∫—Ä–∏–ø—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ coverage —Ç–µ—Å—Ç—ã
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è scripts/ –∏ config/ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- –£–ª—É—á—à–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å badges, Mermaid –¥–∏–∞–≥—Ä–∞–º–º–æ–π –∏ GitHub topics

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–∞—á–µ—Å—Ç–≤–æ

- **–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ E2E —Ç–µ—Å—Ç—ã** ‚Äî –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –ø–∞–Ω–¥—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º API
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π (–≥—Ä–∞—Ñ–∏–∫–∏, —Ç–∞–±–ª–∏—Ü—ã, –¥–∏–∞–≥—Ä–∞–º–º—ã, –∫–∞—Ä—Ç—ã) —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∫–∞—á–µ—Å—Ç–≤–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ –≤—Å–µ–º –ø—Ä–µ–¥–º–µ—Ç–∞–º —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ—Å—Ç–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ç–æ –ø–æ –≤—Å–µ–º –ø—Ä–µ–¥–º–µ—Ç–∞–º —Å –ø–æ–ª–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º —á–µ—Ä–µ–∑ Vision API
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π —á–µ—Ä–µ–∑ homework endpoint —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —à–∫–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã (–∏—Å—Ç–æ—Ä–∏—è, –≥–µ–æ–≥—Ä–∞—Ñ–∏—è) –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
  - –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ –≤—Å–µ–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏: —Ç–µ–∫—Å—Ç ‚Üí –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è ‚Üí —Ñ–æ—Ç–æ ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –î–ó
  - –í—Å–µ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–µ–∞–ª—å–Ω—ã–π Yandex Cloud API –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã –≤ production-–ø–æ–¥–æ–±–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö

### –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–∞–Ω–¥—ã –∏ –ø—Ä–æ–º–ø—Ç—ã (2026)

- **–°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è**: –ø–∞–Ω–¥–∞ –º–æ–∂–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ –∏ –ø–æ-—É—á–µ–±–Ω–æ–º—É (–æ—Å–Ω–æ–≤–Ω–æ–π –æ—Ç–≤–µ—Ç) –∏–ª–∏ —Å –¥—Ä—É–∂–µ—Å–∫–æ–π –∏—Ä–æ–Ω–∏–µ–π (–ø–æ–¥–±–∞–¥—Ä–∏–≤–∞–Ω–∏–µ, –º—è–≥–∫–∏–π –æ—Ç–∫–∞–∑ –æ—Ç —É—á—ë–±—ã); –≤ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–µ–º–∞—Ö –∏ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –î–ó ‚Äî –±–µ–∑ –∏—Ä–æ–Ω–∏–∏.
- **–ï–¥–∏–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç** (`bot/config/prompts.py`): –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —É—á—ë–±—ã –Ω–∞–¥ –∏–≥—Ä–∞–º–∏ (¬´—Ä–µ—à–∞—Ç—å –∑–∞–¥–∞—á–∏¬ª ‚Üí —É—á–µ–±–Ω—ã–µ –∑–∞–¥–∞—á–∏), –º–æ—Ç–∏–≤–∞—Ü–∏—è —Å –¥—Ä—É–∂–µ—Å–∫–æ–π –∏—Ä–æ–Ω–∏–µ–π –±–µ–∑ –¥–∞–≤–ª–µ–Ω–∏—è, –≥—Ä–∞–Ω–∏—Ü—ã –∏—Ä–æ–Ω–∏–∏ (—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ–º—ã ‚Äî –±–µ–∑ –∏—Ä–æ–Ω–∏–∏), –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–∑—Ä–æ—Å–ª—ã–µ —Ç–µ–º—ã (–ñ–ö–£, –±–∞–Ω–∫–∏) –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏.
- **–û—Ç–¥—ã—Ö/–∏–≥—Ä—ã** (`panda_lazy_service`): —Ä–∞—Å—à–∏—Ä–µ–Ω `CONTINUE_LEARN_PATTERNS` ‚Äî ¬´–¥–∞–≤–∞–π —Ä–µ—à–∞—Ç—å –∑–∞–¥–∞—á–∏¬ª, ¬´–∑–∞–¥–∞—á–∏ –ø–æ –≥–µ–æ–º–µ—Ç—Ä–∏–∏¬ª –∏ —Ç.–ø. —Å—á–∏—Ç–∞—é—Ç—Å—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º —É—á—ë–±—ã, –ø–∞–Ω–¥–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ —Ä–∞–∑–¥–µ–ª –ò–≥—Ä—ã.
- **–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**: –µ–¥–∏–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –≤ `bot/config/educational_keywords.py` (Telegram + Mini App).
- **–í–∑—Ä–æ—Å–ª—ã–µ —Ç–µ–º—ã**: —Ö–µ–ª–ø–µ—Ä `try_get_adult_topic_response()` –≤ —Å–µ—Ä–≤–∏—Å–µ; –æ–¥–Ω–∞ —Ç–æ—á–∫–∞ –≤—ã–∑–æ–≤–∞ –≤ Telegram, Mini App chat –∏ stream.
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –î–ó**: —Ç–æ–Ω –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –∏ —á–µ—Å—Ç–Ω—ã–π, –±–µ–∑ –∏—Ä–æ–Ω–∏–∏ –≤ –æ—Ü–µ–Ω–∫–µ. Engagement-–≤–æ–ø—Ä–æ—Å—ã –≤ –¥—É—Ö–µ –ø–∞–Ω–¥—ã.

### –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (2026)

- **Enhanced RAG —Å–∏—Å—Ç–µ–º–∞** ‚Äî –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ Retrieval-Augmented Generation
  - **Multi-query RAG** ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏ –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ —Ç–µ—Ä–º–∏–Ω–∞–º–∏
  - **Reranking** ‚Äî –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ relevance, age_match, recency, source_quality
  - **Semantic Cache** ‚Äî –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –∫–µ—à —á–µ—Ä–µ–∑ pgvector + Yandex Embeddings API (cosine similarity), fallback –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
  - **Context Compression** ‚Äî —Å–∂–∞—Ç–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞ 75‚Äì90%, –∑–∞—â–∏—Ç–∞ —Å–ø–∏—Å–∫–æ–≤ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö ¬´—Å–ø–∏—Å–æ–∫¬ª/¬´—Ç–∞–±–ª–∏—Ü–∞ –∑–Ω–∞—á–µ–Ω–∏–π¬ª
  - **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `knowledge_service.enhanced_search()` –∏ AI response generator
- **–£–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ AI –æ—Ç–≤–µ—Ç–æ–≤**
  - **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã** ‚Äî —á–µ—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞–º–∏ –∏ –Ω—É–º–µ—Ä–∞—Ü–∏–µ–π
  - **–£—á–µ—Ç –í–°–ï–• —Å–ª–æ–≤ –∑–∞–ø—Ä–æ—Å–∞** ‚Äî AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞–∂–¥–æ–µ —Å–ª–æ–≤–æ –≤ –≤–æ–ø—Ä–æ—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - **–ì–ª—É–±–æ–∫–∏–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–π** ‚Äî 4-–ø–∞—Ä–∞–≥—Ä–∞—Ñ–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –º–∏–Ω–∏–º—É–º 4-6 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
  - **–ó–∞–ø—Ä–µ—Ç –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü** ‚Äî AI –æ–±—ä—è—Å–Ω—è–µ—Ç –ö–ê–ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É, –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è
  - **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–º–ø—Ç—ã** ‚Äî –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ–¥ —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–≥—Ä–∞—Ñ–∏–∫/—Ç–∞–±–ª–∏—Ü–∞/—Å—Ö–µ–º–∞)
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –î–ó –ø–æ —Ñ–æ—Ç–æ —Å –ø–æ–∏—Å–∫–æ–º –æ—à–∏–±–æ–∫ –∏ –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏
  - API endpoints –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –∏—Å—Ç–æ—Ä–∏–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Yandex Vision API –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ –ë–î –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ** ‚Äî —É–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±—É—á–µ–Ω–∏—è
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ç–µ–º –ø–æ –∫–∞–∂–¥–æ–º—É –ø—Ä–µ–¥–º–µ—Ç—É
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–¥ —É—Ä–æ–≤–µ–Ω—å —É—á–µ–Ω–∏–∫–∞
  - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—é —Å–ª–æ–∂–Ω—ã—Ö —Ç–µ–º

## –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ –ø—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ, –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–ø—Ä–µ—â–µ–Ω—ã –±–µ–∑ –ø–∏—Å—å–º–µ–Ω–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø—Ä–∞–≤–æ–æ–±–ª–∞–¥–∞—Ç–µ–ª—è.

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏: —Å–º. [LICENSE](LICENSE)

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

- –°–∞–π—Ç: https://pandapal.ru
- Telegram –ë–æ—Ç: https://t.me/PandaPalBot
- GitHub: https://github.com/gaus-1/pandapal-bot

## GitHub Topics

`telegram-bot` `education` `ai-assistant` `yandex-cloud` `react` `typescript` `python` `postgresql` `pgvector` `rag` `educational-platform` `kids-learning` `homework-helper` `aiogram` `mini-app`
