# Политика безопасности

## Поддерживаемые версии

Мы активно поддерживаем следующие версии PandaPal:

| Версия | Поддержка         |
| ------ | ----------------- |
| 2.x    | ✅ Активная       |
| 1.x    | ⚠️ Критические баги только |
| < 1.0  | ❌ Не поддерживается |

## Сообщить об уязвимости

Мы серьезно относимся к безопасности PandaPal. Если вы обнаружили уязвимость, пожалуйста, сообщите нам об этом ответственно.

### Как сообщить

**НЕ создавайте публичный Issue для уязвимостей безопасности.**

Вместо этого:

1. **GitHub Security Advisories** (рекомендуется):
   - Перейдите на вкладку [Security](https://github.com/gaus-1/pandapal-bot/security)
   - Нажмите "Report a vulnerability"
   - Заполните форму с деталями

2. **Email** (альтернатива):
   - Отправьте email на: [создайте приватный Issue с меткой "security"]
   - Тема: `[SECURITY] Краткое описание`
   - Укажите детали уязвимости

### Что включить в отчет

Пожалуйста, предоставьте следующую информацию:

- **Тип уязвимости** (например, SQL injection, XSS, CSRF)
- **Затронутые компоненты** (файлы, endpoints, функции)
- **Шаги для воспроизведения**
- **Потенциальное влияние**
- **Предлагаемое исправление** (если есть)
- **Ваши контактные данные** для дальнейшей связи

### Процесс обработки

1. **Подтверждение** — в течение 48 часов
2. **Оценка** — в течение 7 дней
3. **Исправление** — в зависимости от серьезности:
   - Критические: 1-3 дня
   - Высокие: 7-14 дней
   - Средние: 30 дней
   - Низкие: следующий релиз
4. **Публикация** — после выпуска патча

### Программа вознаграждений

В настоящее время у нас нет официальной bug bounty программы, но мы:

- Публично признаем ваш вклад (если вы согласны)
- Добавим вас в [SECURITY_CONTRIBUTORS.md](SECURITY_CONTRIBUTORS.md)
- Предоставим бесплатный Premium доступ на год

### Меры безопасности проекта

PandaPal реализует следующие меры безопасности:

#### Защита данных
- ✅ Шифрование данных в transit (HTTPS/TLS)
- ✅ Шифрование секретов в БД
- ✅ Безопасное хранение паролей (bcrypt)
- ✅ Токены с ограниченным сроком действия

#### Защита приложения
- ✅ Валидация входных данных (Pydantic)
- ✅ Защита от SQL injection (SQLAlchemy ORM)
- ✅ Защита от XSS (Content Security Policy)
- ✅ Защита от CSRF (токены)
- ✅ Rate limiting (60 req/min API, 30 req/min AI)
- ✅ Модерация контента (150+ паттернов)

#### Инфраструктура
- ✅ Регулярные обновления зависимостей
- ✅ Автоматическое сканирование уязвимостей (Dependabot)
- ✅ Pre-commit hooks (bandit, safety)
- ✅ CI/CD с проверками безопасности

#### Мониторинг
- ✅ Логирование всех критических операций
- ✅ Мониторинг подозрительной активности
- ✅ Алерты на аномалии

### Известные ограничения

Текущие известные ограничения безопасности:

1. **Rate limiting** — базируется на IP (можно обойти через VPN)
2. **Модерация контента** — паттерн-based (может пропустить новые обходы)
3. **File uploads** — ограничение 20MB (можно улучшить валидацию типов)

Мы активно работаем над улучшением этих аспектов.

### Ресурсы безопасности

- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [CWE Top 25](https://cwe.mitre.org/top25/)
- [Python Security Best Practices](https://python.readthedocs.io/en/latest/library/security_warnings.html)

### Scope

**В scope:**
- ✅ Backend API (bot/, web_server.py)
- ✅ Frontend (frontend/)
- ✅ Database queries
- ✅ Authentication/Authorization
- ✅ Payment processing
- ✅ Content moderation bypass

**Вне scope:**
- ❌ Социальная инженерия
- ❌ DoS/DDoS атаки
- ❌ Физический доступ
- ❌ Уязвимости в сторонних сервисах (Yandex Cloud, Railway)
- ❌ Проблемы с устаревшими версиями браузеров

### Контакты

Для вопросов по безопасности:
- GitHub Security: https://github.com/gaus-1/pandapal-bot/security
- Email: [создайте приватный security issue]

---

Спасибо за помощь в обеспечении безопасности PandaPal.
